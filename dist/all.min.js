"use strict";function _defineProperty(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}!function(){angular.module("cn.flex-form",["ui.router","schemaForm","ui.bootstrap.datetimepicker","cnTagsInput","cn.util"])}(),function(){function e(){function e(e){n.push(e)}function r(e){function r(){return _.chain(e).omit(n).omit(function(e){return _.isUndefined(e)||_.isNull(e)}).value()}return{getStateParams:r,ignoreParams:n}}r.$inject=["$stateParams"];var n=["page","debug","sandbox","modal","modalId"];return{addIgnoreParam:e,$get:r}}angular.module("cn.flex-form").provider("cnFlexFormConfig",e)}(),function(){function e(){return{restrict:"E",scope:{config:"=ffHeaderConfig",submit:"&ffSubmit",loadOffscreen:"&ffLoadOffscreen"},controller:r,bindToController:!0,controllerAs:"vm",template:'\n          <div class="col-md-6">\n            <h5 ng-if="vm.config.title.lead">{{::vm.config.title.lead}}</h5>\n            <h1>{{vm.config.title.main}}</h1>\n            <h5 ng-if="vm.config.title.sub">{{::vm.config.title.sub}}</h5>\n          </div>\n          <div class="{{vm.config.buttonContainerClass || \'page-action-btns\'}}">\n            <div class="btn-options"\n                 ng-mouseover="vm.loadOffscreen()">\n              <a class="btn"\n                 ng-if="vm.config.actionConfig.returnState"\n                 ui-sref="{{vm.config.actionConfig.returnState}}">\n                {{vm.config.actionConfig.returnText || \'Cancel\'}}\n              </a>\n              <a class="btn"\n                 ng-if="vm.config.actionConfig.closeButton"\n                 ng-click="vm.config.actionConfig.closeButton.handler()">\n                 Cancel\n              </a>\n              <span ng-repeat="button in vm.config.actionConfig.actions">\n                <span ng-class="{\'btn-group\': button.options}">\n                  <a class="btn {{button.style && \'btn-\'+button.style}}"\n                     ng-disabled="vm.isDisabled(button)"\n                     ng-class="{\'btn-primary\': $index === vm.config.actionConfig.actions.length - 1}"\n                     ng-click="vm.submit({handler: button.handler})"\n                     tooltip="{{button.helptext}}"\n                     tooltip-placement="bottom"\n                     ng-bind-html="button.text || \'Save\'">\n                  </a>\n                  <a class="btn {{button.style && \'btn-\'+button.style}} dropdown-toggle"\n                          ng-disabled="vm.isDisabled(button)"\n                          ng-class="{\'btn-primary\': $index === vm.config.actionConfig.actions.length - 1}"\n                          ng-show="button.options"\n                          data-toggle="dropdown">\n                    <span class="caret"></span>\n                  </a>\n                  <ul class="dropdown-menu" ng-if="button.options">\n                    <li ng-repeat="option in button.options"\n                        ng-disabled="vm.isDisabled(option)">\n                      <a ng-click="vm.submit({handler: option.handler})"\n                         ng-bind-html="option.text">\n                      </a>\n                    </li>\n                  </ul>\n                </span>\n              </span>\n            </div>\n            <p class="data-updated-at text-right"\n               id="data-updated-at"\n               ng-hide="vm.config.noData">\n              <a ng-click="vm.updateData()">Update Data</a>\n            </p>\n          </div>'}}function r(e){function r(){console.log("updateData:",r),e.$emit("ffRefreshData")}function n(e){return!!o.config.isDisabled&&o.config.isDisabled(e)}var o=this;o.updateData=r,o.isDisabled=n}angular.module("cn.flex-form").directive("cnFlexFormHeader",e),r.$inject=["$scope"]}(),function(){function e(e,r,n,o){function t(){i.modal=e.open(i),i.modal.result["finally"](a),i.dismiss=n.$on("$stateChangeStart",s)}function a(){r.transition||r.go("^")}function s(){console.log("dismissModal:",arguments),i.dismiss(),i.modal.dismiss()}var i=this;console.log("FlexFormModalLoader:",o.modal),t()}function r(e,r,n){function o(){var o=e.getMapping(n.modal);return console.log("currentModal:",o),this.modal=r.open(o),this.modal}var t={open:o};return t}angular.module("cn.flex-form").controller("FlexFormModalLoader",e).factory("FlexFormModal",r),e.$inject=["FlexFormModal","$state","$rootScope","$stateParams"],r.$inject=["cnFlexFormModalLoaderService","$modal","$stateParams"]}(),function(){function e(e){var r=s[e];return r||(r={},s[e]=r),r}function r(r,n,o){var t=e(r),a=t[n];return a||(a=o.defer(),t[n]=a),a}function n(r,n,o){var t=e(r),a=o.defer();return t[n]=a,a}function o(){function e(e,r){r.resolve={parent:n},a[e]=r}function n(e,n){return r(e.modal,e.modalId,n).promise}var o={addMapping:e,$get:t};return n.$inject=["$stateParams","$q"],o}function t(e){function r(r,o,t){var a=n(r,o,e);return a.resolve(t),a.promise}function o(e){return a[e]}var t={getMapping:o,resolveMapping:r};return t}angular.module("cn.flex-form").provider("cnFlexFormModalLoaderService",o);var a={},s={};t.$inject=["$q"]}(),function(){function e(){function e(e){n.unshift(e)}function r(){function e(e){for(var r=0,o=n.length;r<o;r++)if(n[r].condition(e))return n[r].type;return e.type||e.schema&&e.schema.type}return{fieldTypeRegister:n,getFieldType:e}}var n=[{condition:function(e){return"hidden"===e.type},type:"hidden"},{condition:function(e){return e.type.includes("radios")},type:"cn-radios"},{condition:function(e){return e.type.includes("radiobuttons")},type:"cn-radiobuttons"},{condition:function(e){return e.type.includes("autocomplete")||e.titleMap||e.titleMapResolve||e.titleMapQuery},type:"cn-autocomplete"},{condition:function(e){return"cn-datetimepicker"===e.type||"datetime-local"===e.type||"time-minutes"===e.type},type:"cn-datetimepicker"},{condition:function(e){return"help"===e.type},type:"help"},{condition:function(e){return e.type.includes("display")},type:"cn-display"},{condition:function(e){return e.schema&&e.schema.format&&e.schema.format.includes("currency")},type:"cn-currency"},{condition:function(e){return e.schema&&"percentage"===e.schema.format},type:"cn-percentage"},{condition:function(e){return"toggle"===e.type||"boolean"===e.type},type:"cn-toggle"},{condition:function(e){return"mediaupload"===e.type},type:"cn-mediaupload"},{condition:function(e){return"csvupload"===e.type},type:"cn-csvupload"},{condition:function(e){return"reusable"===e.type},type:"cn-reusable"},{condition:function(e){return"table"===e.type},type:"cn-table"},{condition:function(e){return"array"===e.type},type:"array"}];return{registerFieldType:e,$get:r}}angular.module("cn.flex-form").provider("cnFlexFormTypes",e)}(),function(){function e(){return{restrict:"A",scope:{form:"=ffValidate"},require:"ngModel",link:r}}function r(e,r,n,o){e.form&&e.form.required&&e.$watch(function(){return o.$viewValue},function(e){o.$setValidity("schemaForm",!0),o.$setValidity("tv4-302",e)})}angular.module("cn.flex-form").directive("ffValidate",e)}(),function(){function e(){return{restrict:"E",template:'        <div ng-if="vm.showForm()">          <ng-form name="{{vm.formName}}"                sf-schema="vm.config.schema.schema"                sf-form="vm.form"                sf-model="vm.model"></ng-form>          <!-- debug panel to display model -->          <section ng-if="vm.debug"><pre pretty-json="vm.model"></pre></section>        </div>      ',scope:{config:"=ffConfig",model:"=ffModel",formIndex:"=ffFormIndex",formName:"=ffFormName",delayForm:"=ffDelayForm",cleanupEvent:"=ffCleanupEvent"},controller:r,controllerAs:"vm",bindToController:!0}}function r(e,r,n){function o(){angular.isNumber(c.formIndex)?c.form=c.config.schema.forms[c.formIndex].form:c.form=c.config.schema.form,n.search().debug&&(c.debug=!0)}function t(r,n){c.form&&(c.service?(console.log("vm.service.isCompiled():",c.service.isCompiled()),c.service.compile(c.config.schema,c.model)):c.service=e(c.config.schema,c.model,{formCtrl:c.config.formCtrl,getSchema:c.config.getSchema,updateSchema:s}))}function a(){return!c.delayForm&&c.service&&c.service.isCompiled()}function s(e){c.config.schema=e,c.activate()}function i(){_.each(c.events,function(e){e()}),c.service.cleanup()}var c=this;c.service=void 0,c.events=[],c.activate=o,c.cleanup=i,c.process=t,c.showForm=a,c.events.push(r.$watch(function(){return c.config.schema},c.process)),c.activate(),r.$on(c.cleanupEvent||"$destroy",c.cleanup)}angular.module("cn.flex-form").directive("cnFlexForm",e),r.$inject=["cnFlexFormService","$scope","$location"]}(),function(){function e(e){function r(){}function n(r){e.state(r.name+".page.modal",{url:"/~:modal/:modalId",controller:"FlexFormModalLoader",controllerAs:"vm",permissions:r.permissions})}var o={addStates:n,$get:r};return o}function r(e){e.state("flex-form-sandbox",{url:"/flex-form/sandbox",controller:"FlexFormSandbox",controllerAs:"vm",templateUrl:"app/components/cn-flex-form/sandbox.html"})}angular.module("cn.flex-form").provider("cnFlexFormRoutes",e).config(r),e.$inject=["$stateProvider"],r.$inject=["$stateProvider"]}();var _slicedToArray=function(){function e(e,r){var n=[],o=!0,t=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(o=(s=i.next()).done)&&(n.push(s.value),!r||n.length!==r);o=!0);}catch(c){t=!0,a=c}finally{try{!o&&i["return"]&&i["return"]()}finally{if(t)throw a}}return n}return function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){function cnFlexFormServiceProvider(e,r){function n(n){n.condition&&r.registerFieldType({condition:n.condition,type:n.type}),n.handler&&(fieldTypeHandlers[n.type]=n.handler),n.templateUrl&&(e.addMapping("bootstrapDecorator",n.type,n.templateUrl),e.createDirective(n.type,n.templateUrl))}return{registerField:n,$get:CNFlexFormService}}function CNFlexFormService(Api,$parse,cnFlexFormConfig,cnFlexFormTypes,sfPath,$interpolate,$rootScope,$timeout,cnUtil,$stateParams){function CNFlexFormConstructor(e,r,n){var o;if(services.length)for(var t=0,a=services.length;t<a;t++)if(services[t].model===r){o=services[t],o.compile(e,r,n);break}return o||(o=new CNFlexForm(e,r,n),services.push(o)),o||new CNFlexForm(e,r,n)}function CNFlexForm(e,r,n){$stateParams.debug&&(window.services=services),this.arrayCopies={},this.arrayListeners={},this.dataCache={},this.defaults={},this.errors=[],this.events=[],this.formCache={},this.listeners={},this.resolveRegister={},this.model=r,this.updates=0,this.params=cnFlexFormConfig.getStateParams(),this._=_,this.compile(e,r,n)}function compile(e,r,n){var o=this;o.schema=e,o.model=r,o.isCompiled()||(o.setupConfig(n),e.forms?_.each(e.forms,function(e){_.each(e.form,o.processField.bind(o))}):_.each(e.form,o.processField.bind(o)),o.initModelWatch(),o.initArrayCopyWatch(),o.isCompiled(!0)),o.broadcastErrors()}function isCompiled(e){var r=this;return e&&(r.schema.compiled=e),r.schema&&r.schema.compiled}function setupConfig(e){var r=this;e&&(e.formCtrl&&(r.formCtrl=e.formCtrl),e.updateSchema&&(r.updateSchema=e.updateSchema),e.getSchema&&(r.getSchemaForm=r.setupSchemaRefresh(e.getSchema)))}function processSchema(e){var r=this,n=e.schema;n&&(e.getSchemaType=function(){return _.isArray(n.type)?_.first(n.type):n.type},r.processDefault(e))}function processDefault(e){var r=this,n=e.schema;if(n["default"]){var o=r.getKey(e.key);if(r.updates){if(o.includes&&o.includes("[]"))return;var t=r.parseExpression(e.key,r.model),a=t.get();(_.isTrulyEmpty(a)||angular.equals(a,r.defaults[o]))&&t.set(n["default"])}r.defaults[o]=angular.copy(n["default"])}"url"!==n.format||e.validationMessage||(e.type||(e.type="url"),e.validationMessage="Must be a valid url (https://...)")}function processFieldset(e){var r=this;e.type="cn-fieldset",e.items.forEach(r.processField.bind(r)),e.collapsible?(e.toggleCollapse=function(e){e.collapsible&&(e.collapsed=!e.collapsed)},e.render=!e.collapsed):e.render=!0}function processField(e){var r=this;if(e.selectDisplay&&r.processSelectDisplay(e,r.getSchema(e.key)),"fieldset"===e.type)r.processFieldset(e);else{e._ogKeys||(e._ogKeys=_.without(_.keys(e),"key","htmlClass"));var n=r.getKey(e.key);if(e.key&&(r.addToFormCache(e,n),e.schema=r.getSchema(n),e.schema&&(e.schema.description&&(e.description=e.schema.description),e.readonly&&!e.schema.readonly&&(e.readonly=!1),"array"!==e.schema.type||"showClearAll"in e||(e.showClearAll=!0))),r.processSchema(e),e.type||(e.type=e.getSchemaType&&e.getSchemaType()),e.resolve&&r.processResolve(e),e.watch&&r.processFieldWatch(e),"section"===e.type||"tabarray"===e.type)r.processSection(e);else if("component"===e.type)r.processComponent(e);else{var o=cnFlexFormTypes.getFieldType(e),t=fieldTypeHandlers[o];_.isString(t)?r[t](e):_.isFunction(t)&&t.call(r,e),e.conditionals&&r.processConditional(e),e.updateSchema&&r.registerHandler(e,null,e.updateSchema),r.errors=_.reject(r.errors,{key:n}),$rootScope.$broadcast("schemaForm.error."+n,"schemaForm",!0),$rootScope.$broadcast("schemaForm.error."+n,"serverValidation",!0),e.error&&(r.errors.push(r.buildError(e)),_.isEmpty(e.ngModelOptions)?e.ngModelOptions={allowInvalid:!0}:e.ngModelOptions.allowInvalid=!0)}}}function getKey(e){return _.isArray(e)&&(e=_.reduce(e,function(e,r){return/^(\d*)$/.test(r)?e+"["+r+"]":e+"."+r})),e}function getSchema(e,r){var n=this;if(e){e=n.getKey(e),e=sfPath.parse(e),r=r||n.schema.schema.properties;for(var o=void 0,t=void 0;e.length>1;)o=e[0],t=e[1],/^\d*$/.test(t)?2===e.length?r=r=r[e.shift()]:(r=r[e.shift()].items.properties,e.shift()):r=r[e.shift()].properties;return o=e[0]||"items",r[o]}}function processResolve(e){var r=this;return _.each(e.resolve,function(n,o){r.handleResolve(e,o,n);var t=n.match(/^(schema\.data\.|model\.)(\w+)/);t&&("schema.data."===t[1]?r.registerResolve(e,o,t[2]):"model."===t[1]&&r.registerHandler(t[2],function(){r.handleResolve(e,o,n)}))}),e}function handleResolve(e,r,n){var o=this,t=o.parseExpression(n).get();t||0!==n.indexOf("model.")||(t=o.getSchema(n.replace("model.",""))["default"]),console.log("handleResolve:",t,r,n),t&&t.cursor?e.loadMore=function(){var e=n.match(/schema\.data\.(.+)/)[1];o.refreshSchema("data:"+e+":"+t.cursor)}:delete e.loadMore,e[r]=t&&t.data?t.data:t}function registerResolve(e,r,n){var o=this,t=o.getKey(e.key);o.resolveRegister[n]=o.resolveRegister[n]||{};var a=o.resolveRegister[n];a[t]=a[t]||[],a[t].push({field:e,prop:r})}function processConditional(e){var r=this;_.each(e.conditionals,function(n,o){var t=function(t,a){e[o]=r.parseCondition(n),"required"===o&&$rootScope.$broadcast("schemaFormValidate")};e.conditionals[o].match(/model\.([^\s]+)/g).map(function(e){return e.match(/model\.([^\s]+)/)[1]}).forEach(function(e){console.log("registering conditional handler:",e),r.registerHandler(e,t)}),t()})}function processFieldWatch(e){var r=this,n=e.schema;e.watch=_.isArray(e.watch)?e.watch:[e.watch],_.each(e.watch,function(o){if(o.resolution){var t;!function(){var a=o.condition,s=o.resolution,i=void 0;_.isFunction(s)?i=function(e,n){a&&!r.parseCondition(a)||s(e,n)}:(t={},t.date=s.match(/\+ ?(\d+) days/),t.date?(t.date=t.date[1],s=s.replace(t.date,"").trim()):(t.math=s.match(/(\+|\-|\/|\*) ?(\S+)/),t.math&&(t.operator={"+":"add","-":"subtract","*":"multiply","/":"divide"}[t.math[1]],t.adjuster=r.parseExpression(t.math[2]))),s=s.match(/(\S+) ?= ?(\S+)/),i=function(o,i,c,l){var m=a&&replaceArrayIndex(a,c),d=replaceArrayIndex(s[1],c),p=replaceArrayIndex(s[2],c),f=r.parseExpression(d);if(l!==f.path().key){l=f.path().key;var u=r.parseExpression(p);if(!a||r.parseCondition(m))if(t.date)f.set(moment(u.get()).add(t.date,"days").toDate());else if(t.math){var h=$parse(u.get()+t.math[1]+t.adjuster.get())();if(n=n||e.items&&(e.items[0].schema||e.items[0].items&&e.items[0].items[0].schema),"cn-currency"===e.type){var g=n&&"currency-dollars"===n.format?2:0;h="*"===t.math[1]?_.floor(h,g):"/"===t.math[1]?_.ceil(h,g):_.round(h,g)}r.listeners[l]&&(r.listeners[l].trigger=c),f.set(h||0)}else f.set(u.get())}}),r.registerHandler(e,i,e.updateSchema,o.initialize)}()}})}function parseCondition(e){var r=this;if(e.startsWith("_")){var n=/^_\.(.*?)\((.*?),[\s(]*(.*?)\)?\s*=>[{\s]*(?:return)?(.*?)\}?\)$/,o=e.match(n),t=_slicedToArray(o,5),a=t[1],s=t[2],i=t[3],c=t[4];return _[a]($parse(s)(r),generatePredicate(i,c))}return $parse(e)(r)}function generatePredicate(e,r){return function(){for(var n=arguments.length,o=Array(n),t=0;t<n;t++)o[t]=arguments[t];return $parse(r)(e.replace(/\s/g,"").split(",").reduce(function(e,r,n){return e[r]=o[n],e},{}))}}function registerHandler(e,r,n,o){var t=this;if(_.isObject(e)&&!_.isArray(e)){if(!e.key&&e.items)return void _.each(e.items,function(e){t.registerHandler(e,r,e.updateSchema)});e=e.key}e=t.getKey(e);var a=e.match(/([^[\]]*)\[]\.?(.+)/);if(a)return void t.registerArrayHandlers(a[1],a[2],r,n,o);var s=t.parseExpression(e,t.model).get(),i=t.getSchema(e)["default"];if(!t.listeners[e]){var c=_.isUndefined(s)?angular.copy(i):angular.copy(s);t.listeners[e]={handlers:[],updateSchema:n,prev:c}}r&&(t.listeners[e].handlers.push(r),o&&r(s,null,e))}function registerArrayHandlers(e,r,n,o,t){var a=this,s=function(s,i,c){if(i||0===i||!((0|s)<1)){var l,m,d;if(i>s||c){var p=e+"["+(i-1)+"]."+r;if(a.listeners[p])for(l=0,m=i;l<m;l++)d=e+"["+l+"]."+r,a.deregisterHandlers(d);for(l=0,m=s;l<m;l++)d=e+"["+l+"]."+r,a.registerHandler(d,n,o)}else if(s>(i||0))for(l=0|i,m=s;l<m;l++)d=e+"["+l+"]."+r,a.registerHandler(d,n,o,t)}},i=a.parseExpression(e,a.model).get();_.each(i,function(s,i){var c=e+"["+i+"]."+r;a.registerHandler(c,n,o),t&&n(null,null,c)}),a.arrayListeners[e+".length"]?a.arrayListeners[e+".length"].handlers.push(s):a.arrayListeners[e+".length"]={handlers:[s],prev:i?i.length:0}}function deregisterHandlers(e){var r=this;e=r.getKey(e);var n=e.match(/([^[\]]*)\[]\.?(.+)/);return n?void r.deregisterArrayHandlers(n[1],n[2]):void(r.listeners[e]&&(r.listeners[e].handlers=[]))}function deregisterArrayHandlers(e,r){var n=this;n.parseExpression(e,n.model).get().forEach(function(o,t){n.deregisterHandlers(e+"["+t+"]."+r)})}function initModelWatch(){var e=this;e.watching||(e.modelWatch&&e.modelWatch(),e.modelWatch=$rootScope.$watch(function(){return e.model},e.onModelWatch.bind(e),!0),e.initSchemaParams(),e.watching=!0,e.firstUpdate=!0)}function onModelWatch(e,r){var n=this;!n.firstUpdate&&angular.equals(e,r)||(n.firstUpdate=!1,cnUtil.cleanModel(n.model),n.prevParams=angular.copy(n.params),n.params=cnFlexFormConfig.getStateParams(),_.each(n.arrayListeners,function(e,r){var o=n.parseExpression(r,n.model).get();angular.equals(o,e.prev)||(e.handlers.forEach(function(r){return r(o,e.prev)}),e.prev=angular.copy(o))}),_.each(n.listeners,function(e,r){e&&!function(){var o=n.parseExpression(r,n.model).get(),t=angular.equals(o,[])&&!e.prev;angular.equals(o,e.prev)||t||(console.log(":: val, prev ::",o,e.prev),e.handlers.forEach(function(n){n(o,e.prev,r,e.trigger)}),e.trigger=null,e.prev=angular.copy(o)),!e.updateSchema||angular.isUndefined(o)||t||null===o||(n.params[r]=o)}()}),angular.equals(n.params,n.prevParams)||(n.model.id&&!n.updates&&_.isEmpty(n.prevParams)?++n.updates:n.refreshSchema()))}function initSchemaParams(){var e=this;_.each(e.listeners,function(r,n){if(r){var o=e.parseExpression(n,e.model).get();r.updateSchema&&!angular.isUndefined(o)&&null!==o&&(e.params[n]=o)}})}function initArrayCopyWatch(){console.log("initArrayCopyWatch: how many times does this event get registered?");var e=this;e.events.push($rootScope.$on("schemaFormPropagateScope",function(r,n){var o=e.getKey(n.form.key),t=o.match(/^.*\[(\d+)].*$/);o=o.replace(/\[\d+]/g,"[]"),t=t&&parseInt(t[1]),n.form.condition||(n.form.condition="true"),e.addArrayCopy(n,o,t),n.$emit("flexFormArrayCopyAdded",o)})),e.events.push($rootScope.$on("schemaFormDeleteScope",function(r,n,o){console.log("schemaFormDeleteScope:",o,n.form,n);var t=e.getKey(n.form.key).replace(/\[\d+]/g,"[]"),a=e.getArrayCopiesFor(t);if(a.forEach(function(e){e.splice(o,1)}),n.form.link){var s=e.parseExpression(n.form.link,e.model).get();s.splice(o,1)}}))}function addArrayCopy(e,r,n){var o=this;(!n||n<0)&&(n=0),o.arrayCopies[r]||(o.arrayCopies[r]=[]),o.arrayCopies[r][n]=e}function getArrayCopies(e){var r=this;return _.pluck(r.getArrayScopes(e),"form")}function getArrayCopiesFor(e){var r=this;return e+="[]",_.filter(r.arrayCopies,function(r,n){return n.includes(e)})}function getArrayScopes(e){var r=this;return r.arrayCopies[e]}function addToFormCache(e,r){var n=this;r=r||n.getKey(e.key),n.getFromFormCache(r)||(n.formCache[r]=e)}function getFromFormCache(e){var r=this;return r.formCache[e]}function addToDataCache(e,r){var n=this;e&&(n.dataCache[e]=r)}function getFromDataCache(e){var r=this;return r.dataCache[e]}function parseExpression(exp,depth){var service=this;if(!exp||/^(null|false|true|undefined|''|[0-9.]+|\[]|\{})$/.test(exp))return{get:function get(){return eval(exp)}};exp=service.getKey(exp);var match=exp.match(/^(model\.)?(\S+)$/),modelValue={get:function(){for(var e=sfPath.parse(exp),r=depth||service;r&&e.length>1;)r=r[e.shift()];return r&&r[e[0]]},getAssignable:function(){for(var e=sfPath.parse(exp),r=[],n=depth||service;n&&e.length>1;){var o=e.shift();r.push(o),n[o]||(/^\d?$/.test(e[0])?n[o]=[]:n[o]={}),n=n[o]}return{obj:n,key:e[0],path:service.getKey(r),fullPath:service.getKey(r.concat(e.slice(0,1)))}},set:function(e){var r=this.getAssignable();return r.obj[r.key]=e,e},path:function(){return{exp:exp,depth:depth,key:match[2]}}};return modelValue}function processArray(e){var r=this,n=r.getKey(e.key);e.sortOptions={update:function(e,o){var t=r.arrayListeners[n+".length"];t.handlers.forEach(function(e){e(t.prev,t.prev,!0)})}},r.processSection(e)}function processSection(e){var r=this;_.each(e.items,r.processField.bind(r))}function processComponent(e){var r=this;e.type="section",e.htmlClass="row";var n=12/_.reject(e.items,"hidden").length;_.each(e.items,function(o,t){r.processField(o),e.items[t]={type:"section",htmlClass:"col-sm-"+n,items:[o]}})}function processCurrency(e){e.currencyFormat={"currency-dollars":"dollars","currency-microcents":"microcents",currency:"cents"}[e.schema.format],e.type="cn-currency"}function processPercentage(e){e.type="cn-percentage"}function processReusable(e){var r=this;e.type="cn-reusable",e.view=e.view||"new",e.items.forEach(r.processField.bind(r)),e.items=[{type:"section",items:e.items,condition:"!model."+r.getKey(e.key)+".id"}]}function processMediaUpload(e){var r=this;e.type="cn-mediaupload",_.each(e.data,function(n,o){e.data[o]=r.parseExpression(n).get()})}function processCsvUpload(e){e.type="cn-csvupload"}function processRadios(e){e.type="cn-radios"}function processRadiobuttons(e){e.type="cn-radiobuttons",e.fullWidth&&(e.btnClass="col-sm-"+_.divide(12,e.titleMap.length))}function processDate(e){e.type="cn-datetimepicker","time-minutes"===e.schema.format&&(e.maxView="hour",e.iconClass="fa fa-clock-o",e.modelFormatter=function(e){if(e){var r=moment(e);return _.add(_.multiply(r.hours(),60),r.minutes())}},e.modelParser=function(e){if(e){var r=parseInt(e),n=_.floor(r/60),o=r%60;return moment().startOf("day").add("hours",n).add("minutes",o)}},e.viewFormatter=function(r){if(r)return e.modelParser(r).format(e.dateFormat)},e.viewParser=function(e){if(e){var r=e.match(/^(\d{1,2}):?(\d{1,2})? (a|p)/);if(r){var n=_.add("12"===r[1]?0:r[1],"a"===r[3]?0:12),o=r[2]||"00";return 1===o.length&&(o+="0"),_.add(_.multiply(n,60),o)}}})}function getSelectValProp(e){var r="array"===e.getSchemaType();return e.valueProperty||"object"!==(r?e.schema.items.type:e.schema.type)&&"value"}function getAllowedSelectValue(e,r,n){n=n||e.getTitleMap();var o=getSelectValProp(e);if(o){if("array"===e.getSchemaType()){if(!r||!_.isArray(r))return;var t=r.map(function(e){return _.find(n,_defineProperty({},o,e))}).filter(function(e){return void 0!==e});return t}return _.find(n,_defineProperty({},o,r))}}function processSelect(e){var r=this,n=e.schema;if((e.titleMapResolve||e.titleMap)&&(e.getTitleMap=function(){return e.titleMap||r.schema.data[e.titleMapResolve]},e.onInit=function(n,o,t,a){var s=r.parseExpression(o.key,r.model);if("tag-init"===t){var i=getAllowedSelectValue(e,s.get());void 0!==i&&a(i)}}),e.titleMapQuery){var o=e.titleMapQuery.params.q;e.titleQuery=function(r){console.log("titleMap:",r);var n={};return o&&(n[o]=r),Api.get({url:e.titleMapQuery.url,params:n})},o||(e.minLookup="0"),e.onInit=function(e,r,n,o){"tag-init"===n&&o(e)}}if(n.items){var t=[];_.each(n.items.properties,function(e,r){angular.isDefined(e["default"])&&t.push({key:r,"default":e["default"]})}),t.length&&(e.onAdd=function(e,r,n){e.value&&"tag-added"===n&&_.each(t,function(r){e.value[r.key]||(e.value[r.key]=r["default"])})})}e.type.includes("cn-autocomplete")||(e.items?(e.detailedList=!0,"component"!==e.items[0].type&&(e.items.length>1&&(e.items=[{type:"component",items:e.items}]),r.processFieldset(e)),e.type="cn-autocomplete-detailed"):(e.selectionStyle||(e.selectionStyle="tags"===e.key?"tags":"array"===e.getSchemaType()&&1!==e.schema.maxItems?"list":"select"),e.type="cn-autocomplete"),e.titleMapResolve&&$rootScope.$on("cnFlexFormDiff:data",function(n,o){if(o[e.titleMapResolve]){var t=r.parseExpression(e.key,r.model),a=t.get();if(void 0!==a){var s=getAllowedSelectValue(e,a,o[e.titleMapResolve]);void 0===s&&t.set()}}})),e.displayFormat&&(e.itemFormatter=r.processTemplate(e.displayFormat)),r.registerHandler(e.key,function(n){var o=r.formCtrl&&r.formCtrl[r.getKey(e.key)];o&&o.$setDirty&&o.$setDirty()},e.updateSchema)}function processToggle(e){e.type="cn-toggle"}function processHelp(e){e.htmlClass="help-block"}function processDisplay(e){var r=this;e.type="cn-display",e.getDisplay=r.processTemplate(e.displayFormat,!0)}function processTemplate(e,r){var n=this,o=$interpolate;return function(t,a){return r&&(angular.isDefined(a)&&(t=_.map(t,function(e){return"arrayIndex"===e?a:e})),t=n.parseExpression(t,n.model).get()),o(e)(t)}}function processTable(e){var r=this;e.type="cn-table",e.items.forEach(function(n){for(var o=0;o<e.columns.length;o++)_.extend(n.items[o],e.columns[o]),r.processField(n.items[o])})}function processSelectDisplay(e,r){var n,o=this,t=_.find(e.items,"selectField");n=r&&"array"===r.type?o.setupArraySelectDisplay(e,t):o.setupSelectDisplay(e,t),e.selectDisplay=!1,o.registerHandler(t.key,n,t.updateSchema,!0),o.processField(e)}function setupArraySelectDisplay(e,r){var n=this;_.each(e.items,function(e){"false"!==e.condition&&(e.condition="true")});var o=function(o,t,a){var s=getArrayIndex(a);_.each(e.items,function(e){var o=n.getKey(r.key),t=n.getKey(e.key),a=ObjectPath.parse(t);if(o!==t){var i=n.setArrayIndex(o,s),c=n.parseExpression(i,n.model).get(),l=n.getArrayCopies(t);_.includes(c,a[a.length-1])?_.each(l,function(e){getArrayIndex(e)==s&&(e.condition="true")}):_.each(l,function(e){getArrayIndex(e)==s&&(e.condition="false",n.parseExpression(n.getKey(e.key),n.model).set())})}})},t=n.parseExpression(n.getKey(e.key),n.model).get();_.each(e.items,function(e){var o=n.getKey(e.key),a=n.getKey(r.key);o!==a&&_.each(t,function(e,r){var t=n.setArrayIndex(o,r),s=ObjectPath.parse(t),i=n.setArrayIndex(a,r),c=n.parseExpression(i,n.model),l=c.get(),m=n.parseExpression(t,n.model).get();m&&!_.includes(l,s[s.length-1])&&(l||(l=[]),l.push(s[s.length-1]),c.set(l))})});var a=n.getSchema(e.key)["default"];_.each(a,function(e,o){var t=n.getKey(r.key),a=n.setArrayIndex(t,o),s=n.parseExpression(a,n.model),i=s.get();_.each(e,function(e,r){i||(i=[]),i.push(r),s.set(i)})});var s=0,i=_.pluck(_.reject(e.items,{condition:"false"}),"key"),c=$rootScope.$on("flexFormArrayCopyAdded",function(r,t){var a=n.parseExpression(n.getKey(e.key),n.model).get();if(a){var c=a.length*i.length;if(_.includes(i,t)&&s++,s===c){for(var l=0;l<a.length;l++)o(null,null,"["+l+"]");s=0}}}),l=$rootScope.$on("flexForm.updatePage",function(){s=0});return n.events.push(c),n.events.push(l),o}function setupSelectDisplay(e,r){var n=this,o=function(){var o=n.getKey(r.key);_.each(e.items,function(e){var r=n.getKey(e.key),t=ObjectPath.parse(r);if(o!==r){var a=n.parseExpression(o,n.model).get();_.includes(a,t[t.length-1])?e.condition="true":(e.condition="false",n.parseExpression(r,n.model).set())}})},t=n.getKey(r.key),a=n.parseExpression(t,n.model),s=a.get();_.each(e.items,function(e){var r=n.getKey(e.key);if(t!==r){var o=ObjectPath.parse(r),i=n.parseExpression(r,n.model).get();i&&!_.includes(s,o[o.length-1])&&(s||(s=[]),s.push(o[o.length-1]),a.set(s))}});var i=n.getSchema(e.key)["default"];_.each(i,function(e,r){s||(s=[]),s.push(r),a.set(s)});var c=n.parseExpression(e.key,n.model);return i&&!c.get()&&c.set(i),o}function setupSchemaRefresh(e){var r=this;r.refreshSchema=_.debounce(function(n){var o,t=_.extend(cnFlexFormConfig.getStateParams(),r.params),a=cnUtil.diff(r.schema.params,t,!0);(a||n)&&(n?t.updateSchema=n:(o=_.keys(a),o.length>1&&(a=_.omit(a,_.isNull),o=_.keys(a)),t.updateSchema=_.first(o)),t.updateSchema||(a=cnUtil.diff(t,_.omit(r.schema.params,"updateSchema")),o=_.keys(a),t.updateSchema=_.first(o)),e(t).then(function(e){++r.updates,r.processUpdatedSchema(e)}))},100),r.refreshData=_.debounce(function(){e(_.extend(r.schema.params,{updateSchema:"refreshData"})).then(function(e){r.processUpdatedSchema(e),console.log("service.schema.params:",r.schema.params)})},100),r.events.push($rootScope.$on("ffRefreshData",r.refreshData))}function processUpdatedSchema(e){var r=this;if(e.diff){r.schema.params=e.params,e.diff.data&&($rootScope.$broadcast("cnFlexFormDiff:data",e.diff.data),_.each(e.diff.data,function(e,n){e&&e.data&&!_.isEmpty(r.schema.data[n].data)&&!e.reset&&(e.data=r.schema.data[n].data.concat(e.data)),r.schema.data[n]=e,r.resolveRegister[n]&&_.each(r.resolveRegister[n],function(e){e.forEach(function(e){r.handleResolve(e.field,e.prop,"schema.data."+n)})})}));var n=[];e.diff.schema&&($rootScope.$broadcast("cnFlexFormDiff:schema",e.diff.schema),_.each(e.diff.schema,function(e,o){r.schema.schema.properties[o]=e,reprocessSchema(e,o,n)})),e.diff.form&&($rootScope.$broadcast("cnFlexFormDiff:form",e.diff.form),_.each(e.diff.form,function(e){n.indexOf(e.key)===-1&&n.push(e.key);var o=r.getFromFormCache(e.key);o&&r.reprocessField(o,e);var t=r.getArrayCopies(e.key);t&&t.forEach(function(n){return n&&r.reprocessField(n,e)})})),n.length&&_.each(n,function(e){var n=r.getFromFormCache(e);if(n&&r.processField(n),e.includes("[]")){var o=r.getArrayCopies(e);_.each(o,function(e){e&&r.processField(e)})}}),r.broadcastErrors()}else r.updateSchema(e)}function reprocessField(e,r,n){var o=this;!r.condition&&e.condition&&(r.condition="true");var t=!n&&e.condition!==r.condition;console.log("redraw:",o.getKey(e.key),e),_.extend(e,_.omit(r,"items","key")),e._ogKeys.forEach(function(n){r[n]||delete e[n]}),e._ogKeys=_.keys(r),o.deregisterHandlers(r.key),$rootScope.$broadcast("cnFlexFormReprocessField",r.key),t&&e.redraw&&e.redraw()}function reprocessSchema(e,r,n){n.push(r),e.properties&&_.each(e.properties,function(e,o){reprocessSchema(e,r+"."+o,n)}),e.items&&e.items.properties&&_.each(e.properties,function(e,o){reprocessSchema(e,r+"[]."+o,n)})}function buildError(e){var r=this,n=r.getKey(e.key);return{key:n,message:e.error}}function broadcastErrors(){var e=this;$timeout(function(){e.errors.forEach(function(e){$rootScope.$broadcast("schemaForm.error."+e.key,"serverValidation",e.message)})},1)}function replaceArrayIndex(e,r){if(!e.includes("arrayIndex"))return e;var n=/([^.]*)\[arrayIndex\]/.exec(e),o=new RegExp(n[1]+"\\[(\\d+)\\]"),t=o.exec(r);return e.replace(new RegExp(n[0].replace(/(\[|\])/g,"\\$1"),"g"),t[0])}function getArrayIndex(e){return _.isObject(e)?_.find(e.key,function(e){return _.isNumber(e)}):/\[(\d+)\]/.exec(e)[1]}function setArrayIndex(e,r,n){var o,t=this;o=_.isString(e)?ObjectPath.parse(e):_.clone(e);var a=o.indexOf("");return o[a]=r,n?o:t.getKey(o)}function cleanup(){var e=this;_.each(e.events,function(e){e()})}var services=[],prototype={compile:compile,addArrayCopy:addArrayCopy,addToDataCache:addToDataCache,addToFormCache:addToFormCache,broadcastErrors:broadcastErrors,
buildError:buildError,cleanup:cleanup,deregisterHandlers:deregisterHandlers,deregisterArrayHandlers:deregisterArrayHandlers,getArrayCopies:getArrayCopies,getArrayCopiesFor:getArrayCopiesFor,getArrayScopes:getArrayScopes,getFromDataCache:getFromDataCache,getFromFormCache:getFromFormCache,getKey:getKey,getSchema:getSchema,handleResolve:handleResolve,initArrayCopyWatch:initArrayCopyWatch,initModelWatch:initModelWatch,initSchemaParams:initSchemaParams,isCompiled:isCompiled,onModelWatch:onModelWatch,parseCondition:parseCondition,parseExpression:parseExpression,processArray:processArray,processDefault:processDefault,processDisplay:processDisplay,processField:processField,processFieldset:processFieldset,processFieldWatch:processFieldWatch,processComponent:processComponent,processConditional:processConditional,processCurrency:processCurrency,processPercentage:processPercentage,processDate:processDate,processHelp:processHelp,processRadios:processRadios,processRadiobuttons:processRadiobuttons,processReusable:processReusable,processSchema:processSchema,processSelectDisplay:processSelectDisplay,processResolve:processResolve,processSection:processSection,processSelect:processSelect,processTable:processTable,processTemplate:processTemplate,processToggle:processToggle,processUpdatedSchema:processUpdatedSchema,processMediaUpload:processMediaUpload,processCsvUpload:processCsvUpload,registerArrayHandlers:registerArrayHandlers,registerHandler:registerHandler,registerResolve:registerResolve,reprocessField:reprocessField,setArrayIndex:setArrayIndex,setupConfig:setupConfig,setupArraySelectDisplay:setupArraySelectDisplay,setupSelectDisplay:setupSelectDisplay,setupSchemaRefresh:setupSchemaRefresh};return _.extend(CNFlexForm.prototype,prototype),_.extend(CNFlexFormConstructor,prototype),CNFlexFormConstructor}angular.module("cn.flex-form").provider("cnFlexFormService",cnFlexFormServiceProvider);var fieldTypeHandlers={"cn-radios":"processRadios","cn-radiobuttons":"processRadiobuttons","cn-autocomplete":"processSelect","cn-datetimepicker":"processDate",help:"processHelp","cn-display":"processDisplay","cn-currency":"processCurrency","cn-percentage":"processPercentage","cn-mediaupload":"processMediaUpload","cn-csvupload":"processCsvUpload","cn-reusable":"processReusable","cn-toggle":"processToggle","cn-table":"processTable",array:"processArray"};cnFlexFormServiceProvider.$inject=["schemaFormDecoratorsProvider","cnFlexFormTypesProvider"],CNFlexFormService.$inject=["Api","$parse","cnFlexFormConfig","cnFlexFormTypes","sfPath","$interpolate","$rootScope","$timeout","cnUtil","$stateParams"]}(),function(){function e(){function e(){console.log("FlexFormSandbox")}function r(){if(n.schemaStr){var e=angular.fromJson(n.schemaStr);console.log("schema:",e),!e.form&&e.forms&&(e.form=e.forms[0].form),n.config.schema=e.form&&e}}var n=this;n.activate=e,n.onSchema=r,n.model={},n.config={},n.schemaStr="",e()}angular.module("cn.flex-form").controller("FlexFormSandbox",e)}(),function(){function e(e){tv4.addFormat({url:function(e){return _.isString(e)&&!/^(https?:\/\/.{2}|$)/.test(e)&&"invalid url"}});var r=["cn-fieldset","cn-toggle","cn-datetimepicker","cn-autocomplete","cn-autocomplete-detailed","cn-currency","cn-radios","cn-radiobuttons","cn-percentage","cn-display","cn-mediaupload","cn-csvupload","cn-reusable","cn-table"];_.each(r,function(r){e.registerField({type:r,templateUrl:"app/components/cn-flex-form/forms/"+r+".html"})})}function r(e){e.put("app/components/cn-flex-form/forms/cn-toggle.html",'\n        <div class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label" ng-show="showTitle()">{{form.title}}</label>\n          <div class="clearfix">\n            <cn-toggle-switch\n              class="pull-left"\n              ng-show="form.key"\n              ng-model-options="form.ngModelOptions"\n              ng-model="$$value$$"\n              sf-changed="form"\n              schema-validate="form"\n              on-value="form.onValue"\n              off-value="form.offValue"\n              read-only="form.readonly"\n              undefined-class="form.undefinedClass"/>\n            <span ng-show="form.onText && form.offText">\n              {{$$value$$ === form.onValue ? form.onText : form.offText}}\n            </span>\n          </div>\n          <span class="help-block" sf-message="form.description"></span>\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-datetimepicker.html",'\n        <div class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 for="{{form.key.join(\'.\')}}"\n                 ng-show="showTitle()">{{form.title}}</label>\n          <cn-datetimepicker\n            ng-show="form.key"\n            ng-model="$$value$$"\n            ng-model-options="form.ngModelOptions"\n            is-disabled="form.readonly"\n            sf-changed="form"\n            schema-validate="form"\n            input-id="{{form.key.join(\'.\')}}"\n            min-date="form.minDate"\n            max-date="form.maxDate"\n            max-view="{{form.maxView}}"\n            cn-date-required="form.required"\n            placeholder="{{form.placeholder}}"\n            model-type="{{form.schema.type}}"\n            model-formatter="form.modelFormatter"\n            model-parser="form.modelParser"\n            view-formatter="form.viewFormatter"\n            view-parser="form.viewParser"\n            format-string={{form.dateFormat}}\n            icon-class={{form.iconClass}}>\n          </cn-datetimepicker>\n          <span class="help-block" sf-message="form.description"></span>\n        </div>');var r='\n          <tags-input\n            ng-show="form.key"\n            ng-model="$$value$$"\n            ng-model-options="form.ngModelOptions"\n            ng-disabled="form.readonly"\n            sf-changed="form"\n            schema-validate="form"\n            input-id="{{form.key.join(\'.\')}}"\n            display-property="{{form.displayProperty || \'name\'}}"\n            value-property="{{form.valueProperty}}"\n            placeholder="{{form.placeholder || \' \'}}"\n            clear-on-blur="true"\n            add-on-comma="false"\n            add-from-autocomplete-only="{{!form.allowNew}}"\n            on-before-tag-added="form.onAdd({value: $tag}, form, $event, $prev)"\n            on-init="form.onInit($tag, form, $event, $setter)"\n            model-type="{{form.getSchemaType()}}"\n            array-value-type="{{form.schema.items.type}}"\n            hide-tags="{{form.detailedList}}"\n            tags-style="{{form.selectionStyle}}"\n            required="{{form.required}}"\n            min-length="{{form.minLength}}"\n            allowed-tags-pattern=".*"\n            dropdown-icon="true"\n            item-formatter="form.itemFormatter"\n            min-tags="{{form.schema.minItems}}"\n            max-tags="{{form.schema.maxItems || form.getSchemaType() !== \'array\' ? 1 : 0}}"\n            allow-bulk="{{form.bulkAdd}}"\n            bulk-delimiter="{{form.bulkDelimiter}}"\n            bulk-placeholder="{{form.bulkPlaceholder}}"\n            show-clear-all="{{form.showClearAll}}"\n            show-button="true">\n            <auto-complete\n              source="form.getTitleMap && form.getTitleMap() || form.titleQuery($query)"\n              skip-filtering="{{form.titleQuery ? true : false}}"\n              min-length="{{form.minLookup || (form.titleQuery && 3 || 0)}}">\n            </auto-complete>\n          </tags-input>';e.put("app/components/cn-flex-form/forms/cn-autocomplete.html",'\n        <div class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 for="{{form.key.join(\'.\')}}-input"\n                 ng-show="showTitle()">{{form.title}}</label>\n          '+r+'\n          <span class="help-block" style="white-space: pre-line" sf-message="form.description"></span>\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-autocomplete-detailed.html",'\n        <div sf-array="form"\n             class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 for="{{form.key.join(\'.\')}}-input"\n                 ng-show="showTitle()">{{form.title}}</label>\n          <ol class="list-group cn-autocomplete-list"\n              ng-show="modelArray.length"\n              ng-model="modelArray">\n            <li class="list-group-item {{form.fieldHtmlClass}}"\n                ng-repeat="item in modelArray track by $index">\n              <button ng-hide="form.readonly || form.remove === null"\n                      ng-click="deleteFromArray($index)"\n                      type="button" class="close pull-right">\n                <span aria-hidden="true">&times;</span>\n              </button>\n              <sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"/>\n            </li>\n          </ol>\n          '+r+'\n          <span class="help-block" sf-message="form.description"></span>\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-currency.html",'\n        <div class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 ng-show="showTitle()"\n                 for="{{form.key.join(\'.\')}}">{{form.title}}</label>\n          <div class="{{form.fieldClass}} input-group">\n            <label class="input-group-addon"\n                   ng-disabled="form.readonly"\n                   for="{{form.key.join(\'.\')}}">$</label>\n            <input class="form-control"\n                   cn-currency-format="{{form.currencyFormat}}"\n                   cn-currency-placeholder="{{form.placeholder}}"\n                   ng-show="form.key"\n                   ng-model-options="form.ngModelOptions"\n                   ng-disabled="form.readonly"\n                   sf-changed="form"\n                   schema-validate="form"\n                   type="text"\n                   step="any"\n                   min="{{form.min}}"\n                   max="{{form.max}}"\n                   id="{{form.key.join(\'.\')}}"\n                   name="{{form.key.join(\'.\')}}"\n                   ng-model="$$value$$">\n          </div>\n          <span class="help-block" sf-message="form.description"></span>\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-radios.html",'<div class="form-group {{form.htmlClass}}"\n              ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n           <label class="control-label" ng-show="showTitle()">{{form.title}}</label>\n           <div class="btn-group clearfix">\n             <label class="radio radio-block"\n                    ng-repeat="item in form.titleMap">\n               <input type="radio"\n                      sf-changed="form"\n                      ng-disabled="form.readonly"\n                      ng-model="$$value$$"\n                      ng-model-options="form.ngModelOptions"\n                      schema-validate="form"\n                      ff-validate="form"\n                      ng-value="item.value"\n                      name="{{form.key.join(\'.\')}}">\n               <span class="radio-block-icon" ng-if="item.iconClass">\n                 <i class="fa fa-{{item.iconClass}} fa-lg"></i>\n               </span>\n               <span ng-bind-html="item.name"></span>\n             </label>\n           </div>\n           <span class="help-block" sf-message="form.description"></span>\n         </div>'),e.put("app/components/cn-flex-form/forms/cn-radiobuttons.html",'\n        <div class="form-group schema-form-radiobuttons cn-radiobuttons {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label" ng-show="showTitle()">{{form.title}}</label>\n          <div class="btn-group clearfix">\n            <label class="btn btn-{{item.value}} {{form.btnClass}} {{item.value === $$value$$ ? \'active\' : \'\'}}"\n                   ng-repeat="item in form.titleMap">\n              <input type="radio"\n                     class="{{form.fieldHtmlClass}} hide"\n                     sf-changed="form"\n                     ng-disabled="form.readonly"\n                     ng-model="$$value$$"\n                     ng-model-options="form.ngModelOptions"\n                     schema-validate="form"\n                     ff-validate="form"\n                     ng-value="item.value"\n                     name="{{form.key.join(\'.\')}}">\n              <i class="fa fa-{{item.value}} fa-lg"></i>\n              <span ng-bind-html="item.name"></span>\n            </label>\n          </div>\n          <span class="help-block" sf-message="form.description"></span>\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-percentage.html",'\n        <div class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 ng-show="showTitle()"\n                 for="{{form.key && form.key[0]}}">{{form.title}}</label>\n          <div class="{{form.fieldClass}} input-group">\n            <input class="form-control"\n                   cn-percentage-format\n                   ng-show="form.key"\n                   ng-model-options="form.ngModelOptions"\n                   ng-disabled="form.readonly"\n                   sf-changed="form"\n                   schema-validate="form"\n                   type="number"\n                   step="any"\n                   min="{{form.min}}"\n                   max="{{form.max}}"\n                   id="{{form.key && form.key[0]}}"\n                   name="{{form.key && form.key[0]}}"\n                   ng-model="$$value$$">\n             <div class="input-group-addon"\n                    ng-disabled="form.readonly"\n                    for="{{form.key && form.key[0]}}">%</div>\n          </div>\n          <span class="help-block" sf-message="form.description"></span>\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-display.html",'\n        <div class="form-group cn-display{{form.htmlClass}}">\n          <input ng-show="form.key"\n                 class="form-control"\n                 id="{{form.key.join(\'.\')}}"\n                 name="{{form.key.join(\'.\')}}"\n                 ng-disabled="true"\n                 value="{{form.getDisplay(form.key, form.arrayIndex)}}">\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-fieldset.html",'\n        <fieldset ng-disabled="form.readonly" class="schema-form-fieldset {{form.htmlClass}}">\n          <legend ng-click="form.toggleCollapse(form)"\n                  ng-class="{\'sr-only\': !showTitle(), collapsible: form.collapsible}"\n                  ng-mouseenter="form.render = true">\n            <i ng-show="form.collapsible"\n               class="fa fa-caret-{{form.collapsed ? \'right\' : \'down\'}}"></i>\n            {{ form.title }}\n          </legend>\n          <div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div>\n          <div collapse="form.collapsed">\n            <div ng-if="form.render">\n              <sf-decorator ng-repeat="item in form.items" form="item"/>\n            </div>\n          </div>\n        </fieldset>'),e.put("app/components/cn-flex-form/forms/cn-mediaupload.html",'\n        <div class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 ng-show="showTitle()"\n                 for="{{form.key && form.key[0]}}">{{form.title}}</label>\n          <media-upload ng-model="$$value$$"\n                        cn-file-type="form.fileType"\n                        cn-upload-path="form.uploadPath"\n                        cn-data="form.data"\n                        cn-preview-path="form.previewPath"\n                        cn-model-value-key="form.modelValueKey"\n                        ng-model-options="form.ngModelOptions"\n                        sf-changed="form"\n                        schema-validate="form"\n                        ff-form="form"\n                        class="clearfix">\n          </media-upload>\n          <span class="help-block" sf-message="form.description"></span>\n       </div>'),e.put("app/components/cn-flex-form/forms/cn-csvupload.html",'\n        <div class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 ng-show="showTitle()"\n                 for="{{form.key && form.key[0]}}">{{form.title}}</label>\n          <csv-upload ng-model="$$value$$"\n                        cn-upload-path="form.uploadPath"\n                        ng-model-options="form.ngModelOptions"\n                        sf-changed="form"\n                        schema-validate="form"\n                        ff-form="form"\n                        class="clearfix">\n          </csv-upload>\n          <span class="help-block" sf-message="form.description"></span>\n       </div>'),e.put("app/components/cn-flex-form/forms/cn-reusable.html",'\n        <div class="form-group cn-reusable {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 ng-show="showTitle()"\n                 for="{{form.key.join(\'.\')}}">{{form.title}}</label>\n          <cn-select-or\n            ng-show="form.key"\n            select-from="form.library"\n            ng-model="$$value$$"\n            ng-model-options="form.ngModelOptions"\n            sf-changed="form"\n            schema-validate="form"\n            ff-form="form"\n            directiveId="form.directiveId"\n            item-template="form.itemTemplate"\n            toggle-text="form.toggleText"\n            disabled="form.readonly"\n            view="form.view">\n            <sf-decorator ng-repeat="item in form.items" form="item"/>\n          </cn-select-or>\n          <p ng-if="form.loadMore && form.view === \'list\'">\n            <a ng-click="form.loadMore()"\n               class="btn btn-default btn-block">Load More</a>\n          </p>\n          <span class="help-block" sf-message="form.description"></span>\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-table.html",'        <div class="form-group cn-ff-table {{form.htmlClass}}"             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">          <h6>{{form.title}}</h6>          <div class="row">            <div ng-repeat="col in form.columns" class="{{col.columnWidth}}">              <p class="column-header">{{col.columnHeader}}</p>            </div>          </div>          <div class="row" ng-repeat="row in form.items">            <div ng-repeat="col in row.items" class="{{col.columnWidth}}">              <sf-decorator form="col"></sf-decorator>            </div>          </div>          <span class="help-block" sf-message="form.description"></span>        </div>        ')}angular.module("cn.flex-form").config(e).run(r),e.$inject=["cnFlexFormServiceProvider"],r.$inject=["$templateCache"]}();
//# sourceMappingURL=all.min.js.map
