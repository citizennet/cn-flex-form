"use strict";!function(){angular.module("cn.flex-form",["ui.router","schemaForm","ui.bootstrap.datetimepicker","cnTagsInput","cn.util"])}(),function(){function e(){function e(e){t.push(e)}function r(e){function r(){return _.chain(e).omit(t).omit(function(e){return _.isUndefined(e)||_.isNull(e)}).value()}return{getStateParams:r,ignoreParams:t}}r.$inject=["$stateParams"];var t=["page","debug","sandbox","modal","modalId"];return{addIgnoreParam:e,$get:r}}angular.module("cn.flex-form").provider("cnFlexFormConfig",e)}(),function(){function e(){return{restrict:"E",scope:{config:"=ffHeaderConfig",submit:"&ffSubmit",loadOffscreen:"&ffLoadOffscreen"},controller:r,bindToController:!0,controllerAs:"vm",template:'          <div class="col-md-6">            <h5 ng-if="vm.config.title.lead">{{::vm.config.title.lead}}</h5>            <h1>{{vm.config.title.main}}</h1>            <h5 ng-if="vm.config.title.sub">{{::vm.config.title.sub}}</h5>          </div>          <div class="{{vm.config.buttonContainerClass || \'page-action-btns\'}}">            <div class="btn-options"                 ng-mouseover="vm.loadOffscreen()">              <a class="btn"                 ng-if="vm.config.actionConfig.returnState"                 ui-sref="{{vm.config.actionConfig.returnState}}">                {{vm.config.actionConfig.returnText || \'Cancel\'}}              </a>              <span ng-repeat="button in vm.config.actionConfig.actions">                <a class="btn {{button.style && \'btn-\'+button.style}}"                   ng-disabled="vm.isDisabled(button)"                   ng-class="{\'btn-primary\': $index === vm.config.actionConfig.actions.length - 1}"                   ng-click="vm.submit({ handler: button.handler})"                   tooltip="{{button.helptext}}"                   tooltip-placement="bottom">                  {{button.text || \'Save\'}}                </a>              </span>            </div>            <p class="data-updated-at text-right"               id="data-updated-at"               ng-hide="vm.config.noData">              <a ng-click="vm.updateData()">Update Data</a>            </p>          </div>'}}function r(e){function r(){console.log("updateData:",r),e.$emit("ffRefreshData")}function t(e){return n.config.isDisabled?n.config.isDisabled(e):!1}var n=this;n.updateData=r,n.isDisabled=t}angular.module("cn.flex-form").directive("cnFlexFormHeader",e),r.$inject=["$scope"]}(),function(){function e(e,r,t,n){function o(){i.modal=e.open(i),i.modal.result["finally"](a),i.dismiss=t.$on("$stateChangeStart",s)}function a(){r.transition||r.go("^")}function s(){console.log("dismissModal:",arguments),i.dismiss(),i.modal.dismiss()}var i=this;console.log("FlexFormModalLoader:",n.modal),o()}function r(e,r,t){function n(){var n=e.getMapping(t.modal);return console.log("currentModal:",n),this.modal=r.open(n),this.modal}var o={open:n};return o}angular.module("cn.flex-form").controller("FlexFormModalLoader",e).factory("FlexFormModal",r),e.$inject=["FlexFormModal","$state","$rootScope","$stateParams"],r.$inject=["cnFlexFormModalLoaderService","$modal","$stateParams"]}(),function(){function e(e){var r=s[e];return r||(r={},s[e]=r),r}function r(r,t,n){var o=e(r),a=o[t];return a||(a=n.defer(),o[t]=a),a}function t(r,t,n){var o=e(r),a=n.defer();return o[t]=a,a}function n(){function e(e,r){r.resolve={parent:t},a[e]=r}function t(e,t){return r(e.modal,e.modalId,t).promise}var n={addMapping:e,$get:o};return t.$inject=["$stateParams","$q"],n}function o(e){function r(r,n,o){var a=t(r,n,e);return a.resolve(o),a.promise}function n(e){return a[e]}var o={getMapping:n,resolveMapping:r};return o}angular.module("cn.flex-form").provider("cnFlexFormModalLoaderService",n);var a={},s={};o.$inject=["$q"]}(),function(){function e(){function e(e){t.unshift(e)}function r(){function e(e){for(var r=0,n=t.length;n>r;r++)if(t[r].condition(e))return t[r].type;return e.type||e.schema&&e.schema.type}return{fieldTypeRegister:t,getFieldType:e}}var t=[{condition:function(e){return"hidden"===e.type},type:"hidden"},{condition:function(e){return e.type.includes("radios")},type:"cn-radios"},{condition:function(e){return e.type.includes("radiobuttons")},type:"cn-radiobuttons"},{condition:function(e){return e.type.includes("autocomplete")||e.titleMap||e.titleMapResolve||e.titleMapQuery},type:"cn-autocomplete"},{condition:function(e){return"cn-datetimepicker"===e.type||"datetime-local"===e.type||"time-minutes"===e.type},type:"cn-datetimepicker"},{condition:function(e){return"help"===e.type},type:"help"},{condition:function(e){return e.type.includes("display")},type:"cn-display"},{condition:function(e){return e.schema&&e.schema.format&&e.schema.format.includes("currency")},type:"cn-currency"},{condition:function(e){return e.schema&&"percentage"===e.schema.format},type:"cn-percentage"},{condition:function(e){return"toggle"===e.type||"boolean"===e.type},type:"cn-toggle"},{condition:function(e){return"mediaupload"===e.type},type:"cn-mediaupload"},{condition:function(e){return"csvupload"===e.type},type:"cn-csvupload"},{condition:function(e){return"reusable"===e.type},type:"cn-reusable"},{condition:function(e){return"table"===e.type},type:"cn-table"},{condition:function(e){return"array"===e.type},type:"array"}];return{registerFieldType:e,$get:r}}angular.module("cn.flex-form").provider("cnFlexFormTypes",e)}(),function(){function e(){return{restrict:"A",scope:{form:"=ffValidate"},require:"ngModel",link:r}}function r(e,r,t,n){e.form&&e.form.required&&e.$watch(function(){return n.$viewValue},function(e){n.$setValidity("schemaForm",!0),n.$setValidity("tv4-302",e)})}angular.module("cn.flex-form").directive("ffValidate",e)}(),function(){function e(){return{restrict:"E",template:'        <div ng-if="vm.showForm()">          <ng-form name="{{vm.formName}}"                sf-schema="vm.config.schema.schema"                sf-form="vm.form"                sf-model="vm.model"></ng-form>          <!-- debug panel to display model -->          <section ng-if="vm.debug"><pre pretty-json="vm.model"></pre></section>        </div>      ',scope:{config:"=ffConfig",model:"=ffModel",formIndex:"=ffFormIndex",formName:"=ffFormName",delayForm:"=ffDelayForm",cleanupEvent:"=ffCleanupEvent"},controller:r,controllerAs:"vm",bindToController:!0}}function r(e,r,t){function n(){angular.isNumber(c.formIndex)?c.form=c.config.schema.forms[c.formIndex].form:c.form=c.config.schema.form,t.search().debug&&(c.debug=!0)}function o(r,t){c.form&&(c.service?(console.log("vm.service.isCompiled():",c.service.isCompiled()),c.service.compile(c.config.schema,c.model)):c.service=e(c.config.schema,c.model,{formCtrl:c.config.formCtrl,getSchema:c.config.getSchema,updateSchema:s}))}function a(){return!c.delayForm&&c.service&&c.service.isCompiled()}function s(e){c.config.schema=e,c.activate()}function i(){_.each(c.events,function(e){e()}),c.service.cleanup()}var c=this;c.service=void 0,c.events=[],c.activate=n,c.cleanup=i,c.process=o,c.showForm=a,c.events.push(r.$watch(function(){return c.config.schema},c.process)),c.activate(),r.$on(c.cleanupEvent||"$destroy",c.cleanup)}angular.module("cn.flex-form").directive("cnFlexForm",e),r.$inject=["cnFlexFormService","$scope","$location"]}(),function(){function e(e){function r(){}function t(r){e.state(r.name+".page.modal",{url:"/~:modal/:modalId",controller:"FlexFormModalLoader",controllerAs:"vm",permissions:r.permissions})}var n={addStates:t,$get:r};return n}function r(e){e.state("flex-form-sandbox",{url:"/flex-form/sandbox",controller:"FlexFormSandbox",controllerAs:"vm",templateUrl:"app/components/cn-flex-form/sandbox.html"})}angular.module("cn.flex-form").provider("cnFlexFormRoutes",e).config(r),e.$inject=["$stateProvider"],r.$inject=["$stateProvider"]}(),function(){function cnFlexFormServiceProvider(e,r){function t(t){t.condition&&r.registerFieldType({condition:t.condition,type:t.type}),t.handler&&(fieldTypeHandlers[t.type]=t.handler),t.templateUrl&&(e.addMapping("bootstrapDecorator",t.type,t.templateUrl),e.createDirective(t.type,t.templateUrl))}return{registerField:t,$get:CNFlexFormService}}function CNFlexFormService(Api,$parse,cnFlexFormConfig,cnFlexFormTypes,sfPath,$interpolate,$rootScope,$timeout,cnUtil,$stateParams){function CNFlexFormConstructor(e,r,t){var n;if(services.length)for(var o=0,a=services.length;a>o;o++)if(services[o].model===r){n=services[o],n.compile(e,r,t);break}return n||(n=new CNFlexForm(e,r,t),services.push(n)),n||new CNFlexForm(e,r,t)}function CNFlexForm(e,r,t){$stateParams.debug&&(window.services=services),this.arrayCopies={},this.arrayListeners={},this.dataCache={},this.defaults={},this.errors=[],this.events=[],this.formCache={},this.listeners={},this.resolveRegister={},this.model=r,this.updates=0,this.params=cnFlexFormConfig.getStateParams(),this._=_,this.compile(e,r,t)}function compile(e,r,t){var n=this;n.schema=e,n.model=r,n.isCompiled()||(n.setupConfig(t),e.forms?_.each(e.forms,function(e){_.each(e.form,n.processField.bind(n))}):_.each(e.form,n.processField.bind(n)),n.initModelWatch(),n.initArrayCopyWatch(),n.isCompiled(!0)),n.broadcastErrors()}function isCompiled(e){var r=this;return e&&(r.schema.compiled=e),r.schema&&r.schema.compiled}function setupConfig(e){var r=this;e&&(e.formCtrl&&(r.formCtrl=e.formCtrl),e.updateSchema&&(r.updateSchema=e.updateSchema),e.getSchema&&(r.getSchemaForm=r.setupSchemaRefresh(e.getSchema)))}function processSchema(e){var r=this,t=e.schema;t&&(e.getSchemaType=function(){return _.isArray(t.type)?_.first(t.type):t.type},r.processDefault(e))}function processDefault(e){var r=this,t=e.schema;if(t["default"]){var n=r.getKey(e.key);if(r.updates){if(n.includes&&n.includes("[]"))return;var o=r.parseExpression(e.key,r.model),a=o.get();(!r.defaults[n]||_.isUndefined(a)||angular.equals(a,r.defaults[n]))&&o.set(t["default"])}r.defaults[n]=angular.copy(t["default"])}}function processFieldset(e){var r=this;e.type="cn-fieldset",_.each(e.items,r.processField.bind(r)),e.collapsible?(e.toggleCollapse=function(){e.collapsible&&(e.collapsed=!e.collapsed)},e.render=!e.collapsed):e.render=!0}function processField(e){var r=this;if(e.selectDisplay&&r.processSelectDisplay(e,r.getSchema(e.key)),"fieldset"===e.type)r.processFieldset(e);else{e._ogKeys||(e._ogKeys=_.without(_.keys(e),"key","htmlClass"));var t=r.getKey(e.key);if(e.key&&(r.addToFormCache(e,t),e.schema=r.getSchema(t),e.schema&&(e.schema.description&&(e.description=e.schema.description),e.readonly&&!e.schema.readonly&&(e.readonly=!1))),r.processSchema(e),e.type||(e.type=e.getSchemaType&&e.getSchemaType()),e.resolve&&r.processResolve(e),e.watch&&r.processFieldWatch(e),"section"===e.type||"tabarray"===e.type)r.processSection(e);else if("component"===e.type)r.processComponent(e);else{var n=cnFlexFormTypes.getFieldType(e),o=fieldTypeHandlers[n];_.isString(o)?r[o](e):_.isFunction(o)&&o.call(r,e),e.updateSchema&&r.registerHandler(e,null,e.updateSchema),e.error?(r.errors.push(r.buildError(e)),_.isEmpty(e.ngModelOptions)?e.ngModelOptions={allowInvalid:!0}:e.ngModelOptions.allowInvalid=!0):_.find(r.errors,{key:t})&&(r.errors=_.reject(r.errors,{key:t}),$rootScope.$broadcast("schemaForm.error."+t,"schemaForm",!0),$rootScope.$broadcast("schemaForm.error."+t,"serverValidation",!0))}}}function getKey(e){return _.isArray(e)&&(e=_.reduce(e,function(e,r){return/^(\d*)$/.test(r)?e+"["+r+"]":e+"."+r})),e}function getSchema(e,r){var t=this;if(e){e=t.getKey(e),e=sfPath.parse(e),r=r||t.schema.schema.properties,""===_.last(e)&&e.pop();for(var n,o,a;e.length>1;)n=e[0],o=e[1],a=o.match(/^\d*$/),a?(r=r[e.shift()].items.properties,e.shift()):r=r[e.shift()].properties;return n=e[0],r[n]}}function processResolve(e){var r=this;return _.each(e.resolve,function(t,n){r.handleResolve(e,n,t);var o=t.match(/^(schema\.data\.|model\.)(\w+)/);o&&("schema.data."===o[1]?r.registerResolve(e,n,o[2]):"model."===o[1]&&r.registerHandler(o[2],function(){r.handleResolve(e,n,t)}))}),e}function handleResolve(e,r,t){var n=this,o=n.parseExpression(t).get();o&&o.cursor?e.loadMore=function(){var e=t.match(/schema\.data\.(.+)/)[1];n.refreshSchema("data:"+e+":"+o.cursor)}:delete e.loadMore,e[r]=o&&o.data?o.data:o}function registerResolve(e,r,t){var n=this,o=n.getKey(e.key);n.resolveRegister[t]=n.resolveRegister[t]||{};var a=n.resolveRegister[t];a[o]=a[o]||[],a[o].push({field:e,prop:r})}function processFieldWatch(field){var service=this,schema=field.schema;field.watch=_.isArray(field.watch)?field.watch:[field.watch],_.each(field.watch,function(watch){if(watch.resolution){var condition=watch.condition,functionCondition=service.isConditionFunction(condition),resolution=watch.resolution,handler;if(_.isFunction(resolution))handler=function(e,r){var t=functionCondition?service.parseCondition(functionCondition):condition;(!t||$parse(t)(service))&&resolution(e,r)};else{var adjustment={};adjustment.date=resolution.match(/\+ ?(\d+) days/),adjustment.date?(adjustment.date=adjustment.date[1],resolution=resolution.replace(adjustment.date,"").trim()):(adjustment.math=resolution.match(/(\+|\-|\/|\*) ?(\S+)/),adjustment.math&&(adjustment.operator={"+":"add","-":"subtract","*":"multiply","/":"divide"}[adjustment.math[1]],adjustment.adjuster=service.parseExpression(adjustment.math[2]))),resolution=resolution.match(/(\S+) ?= ?(\S+)/),handler=function handler(val,prev,key,trigger){var updatePath,fromPath;resolution[1].includes("arrayIndex")&&(updatePath=replaceArrayIndex(resolution[1],arguments[2]));var update=service.parseExpression(updatePath||resolution[1]);if(trigger!==update.path().key){resolution[2].includes("arrayIndex")&&(fromPath=replaceArrayIndex(resolution[2],arguments[2]));var from=service.parseExpression(fromPath||resolution[2]),parsedCondition=functionCondition?service.parseCondition(functionCondition,condition):condition;if(!parsedCondition||$parse(parsedCondition)(service))if(adjustment.date)update.set(moment(from.get()).add(adjustment.date,"days").toDate());else if(adjustment.math){var result=eval(from.get()+adjustment.math[1]+adjustment.adjuster.get());if(schema=schema||field.items&&(field.items[0].schema||field.items[0].items&&field.items[0].items[0].schema),"cn-currency"===field.type){var p=schema&&"currency-dollars"===schema.format?2:0;result="*"===adjustment.math[1]?_.floor(result,p):"/"===adjustment.math[1]?_.ceil(result,p):_.round(result,p)}service.listeners[update.path().key].trigger=key,update.set(result||0)}else update.set(from.get())}}}service.registerHandler(field,handler,field.updateSchema,watch.initialize)}})}function isConditionFunction(e){return e&&e.match(/(\!?)(.+)\((.+)\)/)}function parseCondition(condition,original){var service=this,invert=condition[1],functionName=condition[2],functionArgument=condition[3];if("any"===functionName){var predicate=functionArgument.match(/(.+)\[\]\.*(.*)(===|>|<|>=|<=)(.+)/),arr=service.parseExpression(predicate[1]).get(),comparator=predicate[3],comparisonValue=predicate[4].trim().replace(/'/g,""),key=predicate[2].trim(),evaluation=!1;return arr.forEach(function(e){var r=key?e[key]:e;evaluatePredicate(r,comparator,comparisonValue)&&(evaluation=!0)}),invert?(!evaluation).toString():evaluation.toString()}return condition=original.replace(/model\./g,"service.model."),!!eval(condition)+""}function evaluatePredicate(e,r,t){switch(r){case"===":return e===t;case">=":return e>=t;case"<=":return t>=e;case">":return e>t;case"<":return t>e}}function registerHandler(e,r,t,n){var o=this;if(_.isObject(e)&&!_.isArray(e)){if(!e.key&&e.items)return void _.each(e.items,function(e){o.registerHandler(e,r,e.updateSchema)});e=e.key}e=o.getKey(e);var a=e.match(/([^[\]]*)\[]\.?(.+)/);if(a)return void o.registerArrayHandlers(a[1],a[2],r,t,n);var s=o.parseExpression(e,o.model).get();if(!o.listeners[e]){var i=angular.copy(s);o.listeners[e]={handlers:[],updateSchema:t,prev:i}}r&&(o.listeners[e].handlers.push(r),n&&r(s,null,e))}function registerArrayHandlers(e,r,t,n,o){var a=this,s=function(s,i,c){if(i||0===i){var l,m,d;if(i>s||c){var p=e+"["+(i-1)+"]."+r;if(a.listeners[p])for(l=0,m=i;m>l;l++)d=e+"["+l+"]."+r,a.deregisterHandlers(d);for(l=0,m=s;m>l;l++)d=e+"["+l+"]."+r,a.registerHandler(d,t,n)}else if(s>(i||0))for(l=i,m=s;m>l;l++)d=e+"["+l+"]."+r,a.registerHandler(d,t,n,o)}},i=a.parseExpression(e,a.model).get();_.each(i,function(s,i){var c=e+"["+i+"]."+r;a.registerHandler(c,t,n),o&&t(null,null,c)}),a.arrayListeners[e+".length"]?a.arrayListeners[e+".length"].handlers.push(s):a.arrayListeners[e+".length"]={handlers:[s],prev:i?i.length:0}}function deregisterHandlers(e){var r=this;e=r.getKey(e);var t=e.match(/([^[\]]*)\[]\.?(.+)/);return t?void r.deregisterArrayHandlers(t[1],t[2]):void(r.listeners[e]&&(r.listeners[e].handlers=[]))}function deregisterArrayHandlers(e,r){var t=this;t.parseExpression(e,t.model).get().forEach(function(n,o){t.deregisterHandlers(e+"["+o+"]."+r)})}function initModelWatch(){var e=this;e.watching||(e.modelWatch&&e.modelWatch(),e.modelWatch=$rootScope.$watch(function(){return e.model},e.onModelWatch.bind(e),!0),e.initSchemaParams(),e.watching=!0,e.firstUpdate=!0)}function onModelWatch(e,r){var t=this;(t.firstUpdate||!angular.equals(e,r))&&(t.firstUpdate=!1,cnUtil.cleanModel(t.model),t.prevParams=angular.copy(t.params),t.params={},_.each(t.arrayListeners,function(e,r){var n=t.parseExpression(r,t.model).get();angular.equals(n,e.prev)||(_.each(e.handlers,function(r){r(n,e.prev)}),e.prev=angular.copy(n))}),_.each(t.listeners,function(e,r){if(e){var n=t.parseExpression(r,t.model).get();angular.equals(n,e.prev)||(_.each(e.handlers,function(t){t(n,e.prev,r,e.trigger)}),e.trigger=null,e.prev=angular.copy(n)),e.updateSchema&&!angular.isUndefined(n)&&null!==n&&(t.params[r]=n)}}),angular.equals(t.params,t.prevParams)||(t.model.id&&!t.updates&&_.isEmpty(t.prevParams)?++t.updates:t.refreshSchema()))}function initSchemaParams(){var e=this;_.each(e.listeners,function(r,t){if(r){var n=e.parseExpression(t,e.model).get();r.updateSchema&&!angular.isUndefined(n)&&null!==n&&(e.params[t]=n)}})}function initArrayCopyWatch(){console.log("initArrayCopyWatch: how many times does this event get registered?");var e=this;e.events.push($rootScope.$on("schemaFormPropagateScope",function(r,t){var n=e.getKey(t.form.key),o=n.match(/^.*\[(\d+)].*$/);n=n.replace(/\[\d+]/g,"[]"),o=o&&parseInt(o[1]),t.form.condition||(t.form.condition="true"),e.addArrayCopy(t.form,n,o),t.$emit("flexFormArrayCopyAdded",n)})),e.events.push($rootScope.$on("schemaFormDeleteScope",function(r,t,n){console.log("schemaFormDeleteScope:",n,t.form,t);var o=e.getKey(t.form.key).replace(/\[\d+]/g,"[]"),a=e.getArrayCopiesFor(o);if(a.forEach(function(e){e.splice(n,1)}),t.form.link){var s=e.parseExpression(t.form.link,e.model).get();s.splice(n,1)}}))}function addArrayCopy(e,r,t){var n=this;(!t||0>t)&&(t=0),n.arrayCopies[r]||(n.arrayCopies[r]=[]),n.arrayCopies[r][t]=e}function getArrayCopies(e){var r=this;return r.arrayCopies[e]}function getArrayCopiesFor(e){var r=this,t=[];return e+="[]",_.each(r.arrayCopies,function(r,n){n.includes(e)&&t.push(r)}),t}function addToFormCache(e,r){var t=this;r=r||t.getKey(e.key),t.getFromFormCache(r)||(t.formCache[r]=e)}function getFromFormCache(e){var r=this;return r.formCache[e]}function addToDataCache(e,r){var t=this;e&&(t.dataCache[e]=r)}function getFromDataCache(e){var r=this;return r.dataCache[e]}function parseExpression(exp,depth){var service=this;if(!exp||/^(null|false|true|undefined|''|[0-9.]+|\[]|\{})$/.test(exp))return{get:function get(){return eval(exp)}};exp=service.getKey(exp);var match=exp.match(/^(model\.)?(\S+)$/),modelValue={get:function(){for(var e=sfPath.parse(exp),r=depth||service;r&&e.length>1;)r=r[e.shift()];return r&&r[e[0]]},set:function(e){for(var r=sfPath.parse(exp),t=depth||service;t&&r.length>1;){var n=r.shift();t[n]||(/^\d?$/.test(r[0])?t[n]=[]:t[n]={}),t=t[n]}return t[r[0]]=e,e},path:function(){return{exp:exp,depth:depth,key:match[2]}}};return modelValue}function processArray(e){var r=this,t=r.getKey(e.key);e.sortOptions={update:function(e,n){var o=r.arrayListeners[t+".length"];o.handlers.forEach(function(e){e(o.prev,o.prev,!0)})}},r.processSection(e)}function processSection(e){var r=this;_.each(e.items,r.processField.bind(r))}function processComponent(e){var r=this;e.type="section",e.htmlClass="row";var t=12/_.reject(e.items,"hidden").length;_.each(e.items,function(n,o){r.processField(n),e.items[o]={type:"section",htmlClass:"col-sm-"+t,items:[n]}})}function processCurrency(e){e.currencyFormat={"currency-dollars":"dollars","currency-microcents":"microcents",currency:"cents"}[e.schema.format],e.type="cn-currency"}function processPercentage(e){e.type="cn-percentage"}function processReusable(e){var r=this;e.type="cn-reusable",e.view=e.view||"new",e.items.forEach(r.processField.bind(r)),e.items=[{type:"section",items:e.items,condition:"!model."+r.getKey(e.key)+".id"}]}function processMediaUpload(e){var r=this;e.type="cn-mediaupload",_.each(e.data,function(t,n){e.data[n]=r.parseExpression(t).get()})}function processCsvUpload(e){e.type="cn-csvupload"}function processRadiobuttons(e){e.type="cn-radiobuttons",e.fullWidth&&(e.btnClass="col-sm-"+_.divide(12,e.titleMap.length))}function processDate(e){e.type="cn-datetimepicker","time-minutes"===e.schema.format&&(e.maxView="hour",e.iconClass="fa fa-clock-o",e.modelFormatter=function(e){if(e){var r=moment(e);return _.add(_.multiply(r.hours(),60),r.minutes())}},e.modelParser=function(e){if(e){var r=parseInt(e),t=_.floor(r/60),n=r%60;return moment().startOf("day").add("hours",t).add("minutes",n)}},e.viewFormatter=function(r){return r?e.modelParser(r).format(e.dateFormat):void 0},e.viewParser=function(e){if(e){var r=e.match(/^(\d{1,2}):?(\d{1,2})? (a|p)/);if(r){var t=_.add("12"===r[1]?0:r[1],"a"===r[3]?0:12),n=r[2]||"00";return 1===n.length&&(n+="0"),_.add(_.multiply(t,60),n)}}})}function processSelect(e){var r=this,t=e.schema;if((e.titleMapResolve||e.titleMap)&&(e.getTitleMap=function(){return e.titleMap||r.schema.data[e.titleMapResolve]},e.onInit=function(t,n,o,a){var s=r.parseExpression(n.key,r.model);if(t=s.get(),"tag-init"===o){var i;if("array"===n.schema.type)"object"!==n.schema.items.type&&(i=[],_.each(t,function(r){var t={};t[e.valueProperty||"value"]=r,i.push(_.find(e.getTitleMap(),t))}));else{var c={};c[e.valueProperty||"value"]=t,i=_.find(e.getTitleMap(),c)}i&&a(i)}}),e.titleMapQuery){var n=e.titleMapQuery.params.q;e.titleQuery=function(r){console.log("titleMap:",r);var t={};return n&&(t[n]=r),Api.get({url:e.titleMapQuery.url,params:t})},n||(e.minLookup="0"),e.onInit=function(e,r,t,n){"tag-init"===t&&n(e)}}if(t.items){var o=[];_.each(t.items.properties,function(e,r){angular.isDefined(e["default"])&&o.push({key:r,"default":e["default"]})}),o.length&&(e.onAdd=function(e,r,t){e.value&&"tag-added"===t&&_.each(o,function(r){e.value[r.key]||(e.value[r.key]=r["default"])})})}e.type.includes("cn-autocomplete")||(e.items?(e.detailedList=!0,"component"!==e.items[0].type&&(e.items.length>1&&(e.items=[{type:"component",items:e.items}]),r.processFieldset(e)),e.type="cn-autocomplete-detailed"):(e.selectionStyle||("tags"===e.key?e.selectionStyle="tags":"array"===e.getSchemaType()&&1!==e.schema.maxItems?e.selectionStyle="list":e.selectionStyle="select"),e.type="cn-autocomplete")),e.displayFormat&&(e.itemFormatter=r.processTemplate(e.displayFormat)),r.registerHandler(e.key,function(t){var n=r.formCtrl&&r.formCtrl[r.getKey(e.key)];n&&n.$setDirty&&n.$setDirty()},e.updateSchema)}function processToggle(e){e.type="cn-toggle"}function processHelp(e){e.htmlClass="help-block"}function processDisplay(e){var r=this;e.type="cn-display",e.getDisplay=r.processTemplate(e.displayFormat,!0)}function processTemplate(e,r){var t=this,n=$interpolate;return function(o,a){return r&&(angular.isDefined(a)&&(o=_.map(o,function(e){return"arrayIndex"===e?a:e})),o=t.parseExpression(o,t.model).get()),n(e)(o)}}function processTable(e){var r=this;e.type="cn-table",e.items.forEach(function(t){for(var n=0;n<e.columns.length;n++)_.extend(t.items[n],e.columns[n]),r.processField(t.items[n])})}function processSelectDisplay(e,r){var t,n=this,o=_.find(e.items,"selectField");console.log("selectField:",o.key,o),t=r&&"array"===r.type?n.setupArraySelectDisplay(e,o):n.setupSelectDisplay(e,o),e.selectDisplay=!1,n.registerHandler(o.key,t,o.updateSchema,!0),n.processField(e)}function setupArraySelectDisplay(e,r){var t=this;_.each(e.items,function(e){"false"!==e.condition&&(e.condition="true")});var n=function(){var n=getArrayIndex(arguments[2]);_.each(e.items,function(e){var o=t.getKey(r.key),a=t.getKey(e.key),s=ObjectPath.parse(a);if(o!==a){var i=t.setArrayIndex(o,n),c=t.parseExpression(i,t.model).get(),l=t.getArrayCopies(a);_.includes(c,s[s.length-1])?_.each(l,function(e){getArrayIndex(e)==n&&(e.condition="true")}):_.each(l,function(e){getArrayIndex(e)==n&&(e.condition="false",t.parseExpression(t.getKey(e.key),t.model).set())})}})},o=t.parseExpression(t.getKey(e.key),t.model).get();_.each(e.items,function(e){var n=t.getKey(e.key),a=t.getKey(r.key);n!==a&&_.each(o,function(e,r){var o=t.setArrayIndex(n,r),s=ObjectPath.parse(o),i=t.setArrayIndex(a,r),c=t.parseExpression(i,t.model),l=c.get(),m=t.parseExpression(o,t.model).get();m&&!_.includes(l,s[s.length-1])&&(l||(l=[]),l.push(s[s.length-1]),c.set(l))})});var a=t.getSchema(e.key)["default"];_.each(a,function(e,n){var o=t.getKey(r.key),a=t.setArrayIndex(o,n),s=t.parseExpression(a,t.model),i=s.get();_.each(e,function(e,r){i||(i=[]),i.push(r),s.set(i)})});var s=0,i=_.pluck(_.reject(e.items,{condition:"false"}),"key"),c=$rootScope.$on("flexFormArrayCopyAdded",function(r,o){var a=t.parseExpression(t.getKey(e.key),t.model).get();if(a){var c=a.length*i.length;if(_.includes(i,o)&&s++,s===c){for(var l=0;l<a.length;l++)n(null,null,"["+l+"]");s=0}}}),l=$rootScope.$on("flexForm.updatePage",function(){s=0});return t.events.push(c),t.events.push(l),n}function setupSelectDisplay(e,r){var t=this,n=function(){var n=t.getKey(r.key);_.each(e.items,function(e){var r=t.getKey(e.key),o=ObjectPath.parse(r);if(n!==r){var a=t.parseExpression(n,t.model).get();_.includes(a,o[o.length-1])?e.condition="true":(e.condition="false",t.parseExpression(r,t.model).set())}})},o=t.getKey(r.key),a=t.parseExpression(o,t.model),s=a.get();_.each(e.items,function(e){var r=t.getKey(e.key);if(o!==r){var n=ObjectPath.parse(r),i=t.parseExpression(r,t.model).get();i&&!_.includes(s,n[n.length-1])&&(s||(s=[]),s.push(n[n.length-1]),a.set(s))}});var i=t.getSchema(e.key)["default"];_.each(i,function(e,r){s||(s=[]),s.push(r),a.set(s)});var c=t.parseExpression(e.key,t.model);return i&&!c.get()&&c.set(i),n}function setupSchemaRefresh(e){var r=this;r.refreshSchema=_.debounce(function(t){var n=_.extend(cnFlexFormConfig.getStateParams(),r.params);console.log("service.schema.params, params:",r.schema.params,n);var o,a=cnUtil.diff(r.schema.params,n,!0);(a||t)&&(t?n.updateSchema=t:(o=_.keys(a),o.length>1&&(a=_.omit(a,_.isNull),o=_.keys(a)),n.updateSchema=_.first(o)),n.updateSchema||(a=cnUtil.diff(n,_.omit(r.schema.params,"updateSchema")),o=_.keys(a),n.updateSchema=_.first(o)),e(n).then(function(e){++r.updates,r.processUpdatedSchema(e)}))},100),r.refreshData=_.debounce(function(){e(_.extend(r.schema.params,{updateSchema:"refreshData"})).then(function(e){r.processUpdatedSchema(e),console.log("service.schema.params:",r.schema.params)})},100),r.events.push($rootScope.$on("ffRefreshData",r.refreshData))}function processUpdatedSchema(e){var r=this;if(e.diff){r.schema.params=e.params,e.diff.data&&_.each(e.diff.data,function(e,t){e&&e.data&&!_.isEmpty(r.schema.data[t].data)&&!e.reset&&(e.data=r.schema.data[t].data.concat(e.data)),r.schema.data[t]=e,r.resolveRegister[t]&&_.each(r.resolveRegister[t],function(e){e.forEach(function(e){r.handleResolve(e.field,e.prop,"schema.data."+t)})})});var t=[];e.diff.schema&&_.each(e.diff.schema,function(e,n){r.schema.schema.properties[n]=e,reprocessSchema(e,n,t)}),e.diff.form&&_.each(e.diff.form,function(e){-1===t.indexOf(e.key)&&t.push(e.key);var n=r.getFromFormCache(e.key);n&&r.reprocessField(n,e);var o=r.getArrayCopies(e.key);o&&_.each(o,function(t){r.reprocessField(t,e)})}),t.length&&_.each(t,function(e){var t=r.getFromFormCache(e);if(t&&r.processField(t),e.includes("[]")){var n=r.getArrayCopies(e);_.each(n,function(e){e&&r.processField(e)})}}),r.broadcastErrors()}else r.updateSchema(e)}function reprocessField(e,r,t){var n=this;_.extend(e,_.omit(r,"items","key")),e._ogKeys.forEach(function(t){r[t]||delete e[t]}),e._ogKeys=_.keys(r),n.deregisterHandlers(r.key),!t&&e.redraw&&e.redraw()}function reprocessSchema(e,r,t){t.push(r),e.properties&&_.each(e.properties,function(e,n){reprocessSchema(e,r+"."+n,t)}),e.items&&e.items.properties&&_.each(e.properties,function(e,n){reprocessSchema(e,r+"[]."+n,t)})}function buildError(e){var r=this,t=r.getKey(e.key);return{key:t,message:e.error}}function broadcastErrors(){var e=this;$timeout(function(){e.errors.forEach(function(e){$rootScope.$broadcast("schemaForm.error."+e.key,"serverValidation",e.message)})},1)}function replaceArrayIndex(e,r){var t=/([^.]*)\[arrayIndex\]/.exec(e),n=new RegExp(t[1]+"\\[(\\d+)\\]"),o=n.exec(r);return e.replace(t[0],o[0])}function getArrayIndex(e){return _.isObject(e)?_.find(e.key,function(e){return _.isNumber(e)}):/\[(\d+)\]/.exec(e)[1]}function setArrayIndex(e,r,t){var n,o=this;n=_.isString(e)?ObjectPath.parse(e):_.clone(e);var a=n.indexOf("");return n[a]=r,t?n:o.getKey(n)}function cleanup(){var e=this;_.each(e.events,function(e){e()})}var services=[],prototype={compile:compile,addArrayCopy:addArrayCopy,addToDataCache:addToDataCache,addToFormCache:addToFormCache,broadcastErrors:broadcastErrors,buildError:buildError,cleanup:cleanup,deregisterHandlers:deregisterHandlers,deregisterArrayHandlers:deregisterArrayHandlers,getArrayCopies:getArrayCopies,getArrayCopiesFor:getArrayCopiesFor,getFromDataCache:getFromDataCache,getFromFormCache:getFromFormCache,getKey:getKey,getSchema:getSchema,handleResolve:handleResolve,initArrayCopyWatch:initArrayCopyWatch,initModelWatch:initModelWatch,initSchemaParams:initSchemaParams,isCompiled:isCompiled,isConditionFunction:isConditionFunction,onModelWatch:onModelWatch,parseCondition:parseCondition,parseExpression:parseExpression,processArray:processArray,processDefault:processDefault,processDisplay:processDisplay,processField:processField,processFieldset:processFieldset,processFieldWatch:processFieldWatch,processComponent:processComponent,processCurrency:processCurrency,processPercentage:processPercentage,processDate:processDate,processHelp:processHelp,processRadiobuttons:processRadiobuttons,processReusable:processReusable,processSchema:processSchema,processSelectDisplay:processSelectDisplay,processResolve:processResolve,processSection:processSection,processSelect:processSelect,processTable:processTable,processTemplate:processTemplate,processToggle:processToggle,processUpdatedSchema:processUpdatedSchema,processMediaUpload:processMediaUpload,processCsvUpload:processCsvUpload,registerArrayHandlers:registerArrayHandlers,registerHandler:registerHandler,registerResolve:registerResolve,reprocessField:reprocessField,setArrayIndex:setArrayIndex,setupConfig:setupConfig,setupArraySelectDisplay:setupArraySelectDisplay,setupSelectDisplay:setupSelectDisplay,setupSchemaRefresh:setupSchemaRefresh};return _.extend(CNFlexForm.prototype,prototype),_.extend(CNFlexFormConstructor,prototype),CNFlexFormConstructor}angular.module("cn.flex-form").provider("cnFlexFormService",cnFlexFormServiceProvider);var fieldTypeHandlers={"cn-radiobuttons":"processRadiobuttons","cn-autocomplete":"processSelect","cn-datetimepicker":"processDate",help:"processHelp","cn-display":"processDisplay","cn-currency":"processCurrency","cn-percentage":"processPercentage","cn-mediaupload":"processMediaUpload","cn-csvupload":"processCsvUpload","cn-reusable":"processReusable","cn-toggle":"processToggle","cn-table":"processTable",array:"processArray"};cnFlexFormServiceProvider.$inject=["schemaFormDecoratorsProvider","cnFlexFormTypesProvider"],CNFlexFormService.$inject=["Api","$parse","cnFlexFormConfig","cnFlexFormTypes","sfPath","$interpolate","$rootScope","$timeout","cnUtil","$stateParams"];
}(),function(){function e(){function e(){console.log("FlexFormSandbox")}function r(){if(t.schemaStr){var e=angular.fromJson(t.schemaStr);console.log("schema:",e),!e.form&&e.forms&&(e.form=e.forms[0].form),t.config.schema=e.form&&e}}var t=this;t.activate=e,t.onSchema=r,t.model={},t.config={},t.schemaStr="",e()}angular.module("cn.flex-form").controller("FlexFormSandbox",e)}(),function(){function e(e){var r=["cn-fieldset","cn-toggle","cn-datetimepicker","cn-autocomplete","cn-autocomplete-detailed","cn-currency","cn-radiobuttons","cn-percentage","cn-display","cn-mediaupload","cn-csvupload","cn-reusable","cn-table"];_.each(r,function(r){e.registerField({type:r,templateUrl:"app/components/cn-flex-form/forms/"+r+".html"})})}function r(e){e.put("app/components/cn-flex-form/forms/cn-toggle.html",'\n        <div class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label" ng-show="showTitle()">{{form.title}}</label>\n          <div class="clearfix">\n            <cn-toggle-switch\n              class="pull-left"\n              ng-show="form.key"\n              ng-model-options="form.ngModelOptions"\n              ng-model="$$value$$"\n              sf-changed="form"\n              schema-validate="form"\n              on-value="form.onValue"\n              off-value="form.offValue"\n              undefined-class="form.undefinedClass"/>\n            <span ng-show="form.onText && form.offText">\n              {{$$value$$ === form.onValue ? form.onText : form.offText}}\n            </span>\n          </div>\n          <span class="help-block" sf-message="form.description"></span>\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-datetimepicker.html",'\n        <div class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 for="{{form.key.join(\'.\')}}"\n                 ng-show="showTitle()">{{form.title}}</label>\n          <cn-datetimepicker\n            ng-show="form.key"\n            ng-model="$$value$$"\n            ng-model-options="form.ngModelOptions"\n            is-disabled="form.readonly"\n            sf-changed="form"\n            schema-validate="form"\n            input-id="{{form.key.join(\'.\')}}"\n            min-date="form.minDate"\n            max-view="{{form.maxView}}"\n            cn-date-required="form.required"\n            placeholder="{{form.placeholder}}"\n            model-type="{{form.schema.type}}"\n            model-formatter="form.modelFormatter"\n            model-parser="form.modelParser"\n            view-formatter="form.viewFormatter"\n            view-parser="form.viewParser"\n            format-string={{form.dateFormat}}\n            icon-class={{form.iconClass}}>\n          </cn-datetimepicker>\n          <span class="help-block" sf-message="form.description"></span>\n        </div>');var r='\n          <tags-input\n            ng-show="form.key"\n            ng-model="$$value$$"\n            ng-model-options="form.ngModelOptions"\n            ng-disabled="form.readonly"\n            sf-changed="form"\n            schema-validate="form"\n            input-id="{{form.key.join(\'.\')}}"\n            display-property="{{form.displayProperty || \'name\'}}"\n            value-property="{{form.valueProperty || \'value\'}}"\n            placeholder="{{form.placeholder || \' \'}}"\n            add-on-blur="true"\n            add-on-comma="false"\n            add-from-autocomplete-only="{{!form.allowNew}}"\n            on-before-tag-added="form.onAdd({value: $tag}, form, $event, $prev)"\n            on-init="form.onInit($tag, form, $event, $setter)"\n            model-type="{{form.getSchemaType()}}"\n            array-value-type="{{form.schema.items.type}}"\n            hide-tags="{{form.detailedList}}"\n            tags-style="{{form.selectionStyle}}"\n            required="{{form.required}}"\n            min-length="{{form.minLength}}"\n            allowed-tags-pattern=".*"\n            dropdown="true"\n            item-formatter="form.itemFormatter"\n            min-tags="{{form.schema.minItems}}"\n            max-tags="{{form.schema.maxItems || form.getSchemaType() !== \'array\' ? 1 : 0}}"\n            allow-bulk="{{form.bulkAdd}}"\n            bulk-delimiter="{{form.bulkDelimiter}}"\n            bulk-placeholder="{{form.bulkPlaceholder}}"\n            show-button="true">\n            <auto-complete\n              source="form.getTitleMap && form.getTitleMap() || form.titleQuery($query)"\n              skip-filtering="{{form.titleQuery ? true : false}}"\n              min-length="{{form.minLookup || (form.titleQuery && 3 || 0)}}">\n            </auto-complete>\n          </tags-input>';e.put("app/components/cn-flex-form/forms/cn-autocomplete.html",'\n        <div class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 for="{{form.key.join(\'.\')}}-input"\n                 ng-show="showTitle()">{{form.title}}</label>\n          '+r+'\n          <span class="help-block" sf-message="form.description"></span>\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-autocomplete-detailed.html",'\n        <div sf-array="form"\n             class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 for="{{form.key.join(\'.\')}}-input"\n                 ng-show="showTitle()">{{form.title}}</label>\n          <ol class="list-group cn-autocomplete-list"\n              ng-show="modelArray.length"\n              ng-model="modelArray">\n            <li class="list-group-item {{form.fieldHtmlClass}}"\n                ng-repeat="item in modelArray track by $index">\n              <button ng-hide="form.readonly || form.remove === null"\n                      ng-click="deleteFromArray($index)"\n                      type="button" class="close pull-right">\n                <span aria-hidden="true">&times;</span>\n              </button>\n              <sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"/>\n            </li>\n          </ol>\n          '+r+'\n          <span class="help-block" sf-message="form.description"></span>\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-currency.html",'\n        <div class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 ng-show="showTitle()"\n                 for="{{form.key.join(\'.\')}}">{{form.title}}</label>\n          <div class="{{form.fieldClass}} input-group">\n            <label class="input-group-addon"\n                   ng-disabled="form.readonly"\n                   for="{{form.key.join(\'.\')}}">$</label>\n            <input class="form-control"\n                   cn-currency-format="{{form.currencyFormat}}"\n                   cn-currency-placeholder="{{form.placeholder}}"\n                   ng-show="form.key"\n                   ng-model-options="form.ngModelOptions"\n                   ng-disabled="form.readonly"\n                   sf-changed="form"\n                   schema-validate="form"\n                   ff-validate="form"\n                   type="text"\n                   step="any"\n                   min="{{form.min}}"\n                   max="{{form.max}}"\n                   id="{{form.key.join(\'.\')}}"\n                   name="{{form.key.join(\'.\')}}"\n                   ng-model="$$value$$">\n          </div>\n          <span class="help-block" sf-message="form.description"></span>\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-radiobuttons.html",'\n        <div class="form-group schema-form-radiobuttons cn-radiobuttons {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label" ng-show="showTitle()">{{form.title}}</label>\n          <div class="btn-group clearfix">\n            <label class="btn btn-{{item.value}} {{form.btnClass}} {{item.value === $$value$$ ? \'active\' : \'\'}}"\n                   ng-repeat="item in form.titleMap">\n              <input type="radio"\n                     class="{{form.fieldHtmlClass}} hide"\n                     sf-changed="form"\n                     ng-disabled="form.readonly"\n                     ng-model="$$value$$"\n                     ng-model-options="form.ngModelOptions"\n                     schema-validate="form"\n                     ff-validate="form"\n                     ng-value="item.value"\n                     name="{{form.key.join(\'.\')}}">\n              <i class="fa fa-{{item.value}} fa-lg"></i>\n              <span ng-bind-html="item.name"></span>\n            </label>\n          </div>\n          <span class="help-block" sf-message="form.description"></span>\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-percentage.html",'\n        <div class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 ng-show="showTitle()"\n                 for="{{form.key && form.key[0]}}">{{form.title}}</label>\n          <div class="{{form.fieldClass}} input-group">\n            <input class="form-control"\n                   cn-percentage-format\n                   ng-show="form.key"\n                   ng-model-options="form.ngModelOptions"\n                   ng-disabled="form.readonly"\n                   sf-changed="form"\n                   schema-validate="form"\n                   type="number"\n                   step="any"\n                   min="{{form.min}}"\n                   max="{{form.max}}"\n                   id="{{form.key && form.key[0]}}"\n                   name="{{form.key && form.key[0]}}"\n                   ng-model="$$value$$">\n             <div class="input-group-addon"\n                    ng-disabled="form.readonly"\n                    for="{{form.key && form.key[0]}}">%</div>\n          </div>\n          <span class="help-block" sf-message="form.description"></span>\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-display.html",'\n        <div class="form-group cn-display{{form.htmlClass}}">\n          <input ng-show="form.key"\n                 class="form-control"\n                 id="{{form.key.join(\'.\')}}"\n                 name="{{form.key.join(\'.\')}}"\n                 ng-disabled="true"\n                 value="{{form.getDisplay(form.key, form.arrayIndex)}}">\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-fieldset.html",'\n        <fieldset ng-disabled="form.readonly" class="schema-form-fieldset {{form.htmlClass}}">\n          <legend ng-click="form.toggleCollapse()"\n                  ng-class="{\'sr-only\': !showTitle(), collapsible: form.collapsible}"\n                  ng-mouseenter="form.render = true">\n            <i ng-show="form.collapsible"\n               class="fa fa-caret-{{form.collapsed ? \'right\' : \'down\'}}"></i>\n            {{ form.title }}\n          </legend>\n          <div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div>\n          <div collapse="form.collapsed">\n            <div ng-if="form.render">\n              <sf-decorator ng-repeat="item in form.items" form="item"/>\n            </div>\n          </div>\n        </fieldset>'),e.put("app/components/cn-flex-form/forms/cn-mediaupload.html",'\n        <div class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 ng-show="showTitle()"\n                 for="{{form.key && form.key[0]}}">{{form.title}}</label>\n          <media-upload ng-model="$$value$$"\n                        cn-file-type="form.fileType"\n                        cn-upload-path="form.uploadPath"\n                        cn-data="form.data"\n                        cn-preview-path="form.previewPath"\n                        cn-model-value-key="form.modelValueKey"\n                        ng-model-options="form.ngModelOptions"\n                        sf-changed="form"\n                        schema-validate="form"\n                        ff-form="form"\n                        class="clearfix">\n          </media-upload>\n          <span class="help-block" sf-message="form.description"></span>\n       </div>'),e.put("app/components/cn-flex-form/forms/cn-csvupload.html",'\n        <div class="form-group {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 ng-show="showTitle()"\n                 for="{{form.key && form.key[0]}}">{{form.title}}</label>\n          <csv-upload ng-model="$$value$$"\n                        cn-upload-path="form.uploadPath"\n                        ng-model-options="form.ngModelOptions"\n                        sf-changed="form"\n                        schema-validate="form"\n                        ff-form="form"\n                        class="clearfix">\n          </csv-upload>\n          <span class="help-block" sf-message="form.description"></span>\n       </div>'),e.put("app/components/cn-flex-form/forms/cn-reusable.html",'\n        <div class="form-group cn-reusable {{form.htmlClass}}"\n             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">\n          <label class="control-label"\n                 ng-show="showTitle()"\n                 for="{{form.key.join(\'.\')}}">{{form.title}}</label>\n          <cn-select-or\n            ng-show="form.key"\n            select-from="form.library"\n            ng-model="$$value$$"\n            ng-model-options="form.ngModelOptions"\n            sf-changed="form"\n            schema-validate="form"\n            ff-form="form"\n            directiveId="form.directiveId"\n            item-template="form.itemTemplate"\n            toggle-text="form.toggleText"\n            disabled="form.readonly"\n            view="form.view">\n            <sf-decorator ng-repeat="item in form.items" form="item"/>\n          </cn-select-or>\n          <p ng-if="form.loadMore && form.view === \'list\'">\n            <a ng-click="form.loadMore()"\n               class="btn btn-default btn-block">Load More</a>\n          </p>\n          <span class="help-block" sf-message="form.description"></span>\n        </div>'),e.put("app/components/cn-flex-form/forms/cn-table.html",'        <div class="form-group cn-ff-table {{form.htmlClass}}"             ng-class="{\'has-error\': hasError(), \'has-success\': hasSuccess()}">          <h6>{{form.title}}</h6>          <div class="row">            <div ng-repeat="col in form.columns" class="{{col.columnWidth}}">              <p class="column-header">{{col.columnHeader}}</p>            </div>          </div>          <div class="row" ng-repeat="row in form.items">            <div ng-repeat="col in row.items" class="{{col.columnWidth}}">              <sf-decorator form="col"></sf-decorator>            </div>          </div>          <span class="help-block" sf-message="form.description"></span>        </div>        ')}angular.module("cn.flex-form").config(e).run(r),e.$inject=["cnFlexFormServiceProvider"],r.$inject=["$templateCache"]}();
//# sourceMappingURL=all.min.js.map
